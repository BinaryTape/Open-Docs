[//]: # (title: マルチプラットフォームモバイル開発をチームに導入する方法)

<web-summary>チームにマルチプラットフォームモバイルアプリ開発を導入する方法について、スムーズで効率的な導入のための6つの推奨事項を学びましょう。</web-summary>

新しいテクノロジーやツールを組織に導入することには、課題が伴います。ワークフローを最適化し効率化するために、チームが[モバイルアプリ開発におけるマルチプラットフォームのアプローチ](cross-platform-mobile-development.md)を採用するのをどのように支援しますか？ここでは、開発者がプラットフォーム間でコードを共有しながらネイティブプログラミングの利点を保持できる、JetBrainsが開発したオープンソース技術である[Kotlin Multiplatform (KMP)](https://www.jetbrains.com/kotlin-multiplatform/)を効果的にチームに紹介するための推奨事項とベストプラクティスをいくつか紹介します。

*   [共感から始める](#start-with-empathy)
*   [Kotlin Multiplatformの仕組みを説明する](#explain-how-kotlin-multiplatform-works)
*   [マルチプラットフォーム開発の価値を実証するために事例研究を活用する](#use-case-studies-to-demonstrate-the-value-of-multiplatform-development)
*   [サンプルプロジェクトを作成して証明する](#offer-proof-by-creating-a-sample-project)
*   [チームからのマルチプラットフォーム開発に関する質問に備える](#prepare-for-questions-about-multiplatform-development-from-your-team)
*   [適応期間中にチームをサポートする](#support-your-team-during-the-adaptation-period)

## 共感から始める

ソフトウェア開発はチーム戦であり、重要な決定はすべてチームメンバー全員の承認を必要とします。クロスプラットフォーム技術を統合することは、モバイルアプリケーションの開発プロセスに大きな影響を与えます。したがって、Kotlin Multiplatformをプロジェクトに統合し始める前に、チームにこのテクノロジーを紹介し、採用する価値があることを穏やかに理解させる必要があります。

プロジェクトに携わる人々を理解することが、統合を成功させるための第一歩です。あなたの上司は、可能な限り最短時間で最高の品質で機能を納品する責任があります。彼らにとって、新しい技術はすべてリスクです。同僚も異なる視点を持っています。彼らは「ネイティブ」技術スタックでアプリを構築した経験があります。彼らはUIとビジネスロジックの記述方法、依存関係の操作、IDEでのコードのテストとデバッグ方法を知っており、すでにその言語に慣れています。異なるエコシステムに切り替えることは常に不便であり、それは常に快適な領域から抜け出すことを意味します。

これらすべてを考慮すると、Kotlin Multiplatformへの移行を提唱する際に、多くの偏見に直面し、多くの質問に答える覚悟が必要です。その際、チームが必要としているものを見失わないでください。以下のいくつかのアドバイスは、あなたの提案の準備に役立つかもしれません。

## Kotlin Multiplatformの仕組みを説明する

この段階では、Kotlin Multiplatformを使用することがプロジェクトに価値をもたらし、チームが抱いているかもしれないクロスプラットフォームモバイルアプリケーションに対する偏見や疑念を払拭できることを示す必要があります。

KMPは、アルファリリース以来、本番環境で広く使用されています。その結果、JetBrainsは広範なフィードバックを収集し、[安定版](https://blog.jetbrains.com/kotlin/2023/11/kotlin-multiplatform-stable/)でさらに優れた開発体験を提供できるようになりました。

*   **すべてのiOSおよびAndroid機能を使用できる** – 共有コードでタスクを達成できない場合や、特定のネイティブ機能を使用したい場合は、`expect/actual`パターンを使用してプラットフォーム固有のコードをシームレスに記述できます。
*   **シームレスなパフォーマンス** – Kotlinで記述された共有コードは、異なるターゲット向けに異なる出力形式にコンパイルされます。Android向けにはJavaバイトコード、iOS向けにはネイティブバイナリです。したがって、これらのコードをプラットフォームで実行する際に、追加のランタイムオーバーヘッドはなく、パフォーマンスは[ネイティブアプリ](native-and-cross-platform.md)に匹敵します。
*   **レガシーコードとの互換性** – プロジェクトの規模がどれほど大きくても、既存のコードがKotlin Multiplatformの統合を妨げることはありません。いつでもクロスプラットフォームコードを書き始め、通常の依存関係としてiOSおよびAndroidアプリに接続できます。あるいは、すでに記述したコードを使用し、iOSと互換性があるように変更できます。

技術がどのように機能するかを説明できることは非常に重要です。なぜなら、議論が魔法に頼っているように見えるのを誰も好みません。不明瞭な点があれば、人々は最悪の事態を考えるかもしれませんので、何かが自明すぎて説明する価値がないと考える間違いを犯さないように注意してください。代わりに、次の段階に進む前に、すべての基本的な概念を説明するように努めてください。[マルチプラットフォームプログラミング](get-started.topic)に関するこのドキュメントは、この経験に備えて知識を体系化するのに役立つでしょう。

## マルチプラットフォーム開発の価値を実証するために事例研究を活用する

マルチプラットフォーム技術がどのように機能するかを理解することは必要ですが、それだけでは十分ではありません。チームはそれを使用することの利点を見る必要があり、それらの利点を提示する方法はあなたの製品に関連しているべきです。

この段階では、製品でKotlin Multiplatformを使用することの主な利点を説明する必要があります。一つの方法は、すでにクロスプラットフォームモバイル開発から恩恵を受けている他の企業の事例を共有することです。これらのチーム、特に同様の製品目標を持つチームの成功体験は、最終決定における重要な要素となる可能性があります。

すでに本番環境でKotlin Multiplatformを使用しているさまざまな企業の事例研究を引用することは、説得力のある議論を行うのに大いに役立ちます。

*   **McDonald's** – グローバルモバイルアプリにKotlin Multiplatformを活用することで、McDonald'sはプラットフォーム間で共有可能なコードベースを構築し、コードベースの冗長性を排除しました。
*   **Netflix** – Kotlin Multiplatformの助けを借りて、Netflixは製品の信頼性とデリバリー速度を最適化しており、これは顧客のニーズに応える上で極めて重要です。
*   **Forbes** – iOSとAndroid間で80%以上のロジックを共有することで、Forbesはプラットフォーム固有のカスタマイズの柔軟性を維持しつつ、両プラットフォームで新機能を同時にリリースしています。
*   **9GAG** – FlutterとReact Nativeの両方を試した後、9GAGは徐々にKotlin Multiplatformを採用し、現在ではユーザーに一貫した体験を提供しながら、より迅速に機能をリリースするのに役立っています。

![Kotlin Multiplatformの成功事例から学ぶ](kmp-success-stories.svg){width="700"}

## サンプルプロジェクトを作成して証明する

理論は良いものですが、最終的に最も重要なのは、それを実践することです。あなたの主張をより説得力のあるものにし、マルチプラットフォームモバイルアプリ開発の潜在能力を示す一つの選択肢として、Kotlin Multiplatformで何かを作成するのに時間を割き、その結果をチームに持ち込んで議論させることができます。あなたのプロトタイプは、何らかのテストプロジェクトのようなもので、ゼロから記述し、あなたのアプリケーションで必要とされる機能をデモンストレーションするものでしょう。
[KtorとSQLDelightを使ってマルチプラットフォームアプリを作成する – チュートリアル](multiplatform-ktor-sqldelight.md)が、このプロセスをうまくガイドしてくれます。

現在のプロジェクトで実験することで、より関連性の高い例を作成できるかもしれません。
Kotlinで実装されている既存の機能の1つを取り上げ、クロスプラットフォーム化することもできます。
あるいは、既存のプロジェクトに新しいマルチプラットフォームモジュールを作成し、バックログの下の方にある優先度の低い機能を取り上げ、共有モジュールで実装することも可能です。
[AndroidアプリケーションをiOSで動作させる – チュートリアル](multiplatform-integrate-in-existing-app.md)は、サンプルプロジェクトに基づいたステップバイステップガイドを提供しています。

## チームからのマルチプラットフォーム開発に関する質問に備える

あなたの提案がどれほど詳細であっても、チームは多くの質問をするでしょう。注意深く耳を傾け、忍耐強くすべてに答えようとしてください。質問の大部分は、チームのiOSパートから来るだろうと予想されます。なぜなら、彼らは日常の開発者ルーチンでKotlinを見ることに慣れていない開発者だからです。よくある質問のリストを以下に示しますので、参考にしてください。

### Q: クロスプラットフォーム技術に基づくアプリケーションは、App Storeから却下される可能性があると聞きました。このリスクを冒す価値はありますか？

A: Apple Storeには、アプリケーション公開のための厳格なガイドラインがあります。その制限の一つは、アプリがアプリの機能や動作を導入または変更するコードをダウンロード、インストール、または実行してはならないというものです（[App Store Review Guideline 2.5.2](https://developer.apple.com/app-store/review/guidelines/#software-requirements)）。これは一部のクロスプラットフォーム技術には当てはまりますが、Kotlin Multiplatformには当てはまりません。共有されたKotlinコードは、Kotlin/Nativeによってネイティブバイナリにコンパイルされ、通常のiOSフレームワークをアプリにバンドルし、動的コード実行の機能を提供しません。

### Q: マルチプラットフォームプロジェクトはGradleで構築されており、Gradleは非常に急な学習曲線を持っています。これは、プロジェクトの設定に多くの時間を費やす必要があるという意味ですか？ {id="gradle-time-spent"}

A: その必要はありません。Kotlinモバイルアプリケーションの構築に関する作業プロセスを編成するさまざまな方法があります。まず、Android開発者のみがビルドを担当できます。この場合、iOSチームはコードを記述するだけ、あるいは結果として得られる成果物を消費するだけでも構いません。また、Gradleの操作を必要とするタスクを扱う際に、いくつかのワークショップを開催したり、ペアプログラミングを実践したりできます。これにより、チームのGradleスキルが高まるでしょう。マルチプラットフォームプロジェクトでのチームワークを編成するさまざまな方法を検討し、チームに最も適したものを選択できます。

チームのAndroidパートのみが共有コードを扱う場合、iOS開発者はKotlinを学ぶ必要すらありません。しかし、全員が共有コードに貢献する次の段階に進む準備ができたとき、移行に多くの時間はかかりません。SwiftとKotlinの構文と機能の類似性により、共有Kotlinコードの読み書きを学ぶのに必要な作業が大幅に削減されます。[Kotlin Koans](https://play.kotlinlang.org/koans/overview)でご自身で試してみてください。これはKotlinの構文といくつかのイディオムに慣れるための一連の演習です。

2023年末、JetBrainsは、使いやすさ、オンボーディング、IDEサポートに焦点を当てた新しい実験的なプロジェクト設定ツールである[Amper](https://blog.jetbrains.com/blog/2023/11/09/amper-improving-the-build-tooling-user-experience/)を導入しました。Amperの機能についてさらに詳しく知るには、その[チュートリアル](amper.md)をご覧ください。

### Q: Kotlin Multiplatformは本番利用可能ですか？

A: 2023年11月、Kotlin Multiplatformが[安定版](https://blog.jetbrains.com/kotlin/2023/11/kotlin-multiplatform-stable/)になったことを発表しました。これは、本番環境での使用に完全に準備が整ったことを意味します。

### Q: アプリのビジネスロジックを実装するのに十分なマルチプラットフォームライブラリがなく、ネイティブの代替を見つける方がはるかに簡単です。なぜKotlin Multiplatformを選ぶべきなのでしょうか？ {id="not-enough-libraries"}

A: Kotlin Multiplatformのエコシステムは活況を呈しており、世界中の多くのKotlin開発者によって育成されています。長年にわたってKMPライブラリの数がどれほど急速に増加しているかを見てください。

![長年にわたるKotlin Multiplatformライブラリの数](kmp-libraries-over-years.png){width=700}

iOSの経験は需要があり、iOS固有の貢献に対して評価を得る機会が豊富にあるため、Kotlin MultiplatformのオープンソースコミュニティでiOS開発者になるには最高の時期です。

チームがマルチプラットフォームモバイル開発を深く掘り下げれば掘り下げるほど、彼らの質問はより興味深く複雑になるでしょう。答えがなくても心配しないでください。Kotlin Multiplatformには、Kotlin Slackに大規模で協力的なコミュニティがあり、専用の[#multiplatform](https://slack-chats.kotlinlang.org/c/multiplatform)チャンネルでは、すでにそれを使用している多くの開発者があなたを助けることができます。チームからよく聞かれる質問を[私たちと共有してください](mailto:kotlin.multiplatform.feedback@kotlinlang.org)。この情報は、どのトピックをドキュメントでカバーする必要があるかを理解するのに役立ちます。

## 適応期間中にチームをサポートする

Kotlin Multiplatformの使用を決定した後、チームがテクノロジーを試す適応期間があるでしょう。そして、あなたの使命はまだ終わりではありません！チームメイトに継続的なサポートを提供することで、チームがテクノロジーに深く入り込み、最初の結果を達成するのにかかる時間を短縮できます。

この段階でチームをサポートするためのヒントをいくつか紹介します。

*   前の段階で聞かれた質問を「Kotlin Multiplatform: よくある質問」のWikiページにまとめ、チームと共有してください。
*   `_#kotlin-multiplatform-support_` Slackチャンネルを作成し、そこで最も活発なユーザーになりましょう。
*   ポップコーンとピザを用意して、Kotlin Multiplatformに関する教育的またはインスピレーションを与える動画を視聴する非公式なチームビルディングイベントを開催しましょう。以下にいくつかの良い選択肢があります。
    *   [KMPの始め方: 共有ロジックとネイティブUIでiOSおよびAndroidアプリを構築する](https://www.youtube.com/live/zE2LIAUisRI?si=V1cn1Pr-0Sjmjzeu)
    *   [Compose MultiplatformでiOS、Android、デスクトップアプリを構築する](https://www.youtube.com/live/IGuVIRZzVTk?si=WFI3GelN7UDjfP97)
    *   [Kotlin MultiplatformでのiOS開発: ヒントとコツ](https://www.youtube.com/watch?v=eFzy1BRtHps)
    *   [Kotlin Multiplatform for Teams by Kevin Galligan](https://www.youtube.com/watch?v=-tJvCOfJesk)

現実には、おそらく1日や1週間で人々の考えや気持ちを変えることはできないでしょう。しかし、忍耐力と同僚のニーズへの配慮は、間違いなく結果をもたらします。

JetBrainsチームは、[Kotlin Multiplatformの経験に関するあなたの話](mailto:kotlin.multiplatform.feedback@kotlinlang.org)を聞くのを楽しみにしています。

_本記事の作成にご協力いただいた[Touchlabチーム](https://touchlab.co)に感謝いたします。_