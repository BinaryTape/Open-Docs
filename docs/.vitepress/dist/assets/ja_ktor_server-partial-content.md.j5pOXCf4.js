import{_ as v,C as l,c as f,o as g,G as o,ag as c,j as e,w as r,a as n}from"./chunks/framework.Bksy39di.js";const w=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"ja/ktor/server-partial-content.md","filePath":"ja/ktor/server-partial-content.md","lastUpdated":1755457140000}'),b={name:"ja/ktor/server-partial-content.md"};function T(P,t,_,C,y,S){const p=l("TopicTitle"),u=l("primary-label"),d=l("Links"),m=l("tldr"),i=l("code-block"),a=l("TabItem"),s=l("Tabs"),k=l("list");return g(),f("div",null,[o(p,{labelRef:"server-plugin",title:"部分コンテンツ"}),o(u,{ref:"server-plugin"},null,512),o(m,null,{default:r(()=>[t[3]||(t[3]=e("p",null,[e("b",null,"必要な依存関係"),n(": "),e("code",null,"io.ktor:ktor-server-partial-content")],-1)),t[4]||(t[4]=e("p",null,[e("b",null,"サーバーの例"),n(": "),e("a",{href:"https://github.com/ktorio/ktor-documentation/tree/3.2.3/codeSnippets/snippets/download-file"},"download-file"),n(", "),e("b",null,"クライアントの例"),n(": "),e("a",{href:"https://github.com/ktorio/ktor-documentation/tree/3.2.3/codeSnippets/snippets/client-download-file-range"},"client-download-file-range")],-1)),e("p",null,[e("b",null,[o(d,{href:"/ktor/server-native",summary:"KtorはKotlin/Nativeをサポートしており、追加のランタイムや仮想マシンなしでサーバーを実行できます。"},{default:r(()=>t[0]||(t[0]=[n("ネイティブサーバー")])),_:1}),t[1]||(t[1]=n("のサポート"))]),t[2]||(t[2]=n(": ✅ "))])]),_:1}),t[17]||(t[17]=c('<p><a href="https://api.ktor.io/ktor-server/ktor-server-plugins/ktor-server-partial-content/io.ktor.server.plugins.partialcontent/-partial-content.html" target="_blank" rel="noreferrer">PartialContent</a>プラグインは、HTTPメッセージの一部のみをクライアントに送信するために使用される<a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Range_requests" target="_blank" rel="noreferrer">HTTPレンジリクエスト</a>の処理をサポートします。このプラグインは、コンテンツのストリーミングや部分的なダウンロードの再開に役立ちます。</p><p><code>PartialContent</code> には以下の制限があります:</p><ul><li><code>HEAD</code> および <code>GET</code> リクエストのみで動作し、クライアントが他のメソッドで <code>Range</code> ヘッダーを使用しようとすると <code>405 Method Not Allowed</code> を返します。</li><li><code>Content-Length</code> ヘッダーが定義されているレスポンスでのみ動作します。</li><li>レンジを配信する際に<a href="./server-compression">Compression</a>を無効にします。</li></ul><h2 id="add_dependencies" tabindex="-1">依存関係の追加 <a class="header-anchor" href="#add_dependencies" aria-label="Permalink to &quot;依存関係の追加 {id=&quot;add_dependencies&quot;}&quot;">​</a></h2><p><code>PartialContent</code> を使用するには、ビルドスクリプトに <code>ktor-server-partial-content</code> アーティファクトを含める必要があります: </p>',5)),o(s,{group:"languages"},{default:r(()=>[o(a,{title:"Gradle (Kotlin)","group-key":"kotlin"},{default:r(()=>[o(i,{lang:"Kotlin",code:'            implementation("io.ktor:ktor-server-partial-content:$ktor_version")'})]),_:1}),o(a,{title:"Gradle (Groovy)","group-key":"groovy"},{default:r(()=>[o(i,{lang:"Groovy",code:'            implementation "io.ktor:ktor-server-partial-content:$ktor_version"'})]),_:1}),o(a,{title:"Maven","group-key":"maven"},{default:r(()=>[o(i,{lang:"XML",code:`            <dependency>
                <groupId>io.ktor</groupId>
                <artifactId>ktor-server-partial-content-jvm</artifactId>
                <version>\${ktor_version}</version>
            </dependency>`})]),_:1})]),_:1}),t[18]||(t[18]=e("h2",{id:"install_plugin",tabindex:"-1"},[n("PartialContent のインストール "),e("a",{class:"header-anchor",href:"#install_plugin","aria-label":'Permalink to "PartialContent のインストール {id="install_plugin"}"'},"​")],-1)),e("p",null,[t[6]||(t[6]=n(" アプリケーションに ")),t[7]||(t[7]=e("code",null,"PartialContent",-1)),t[8]||(t[8]=n(" プラグインを")),t[9]||(t[9]=e("a",{href:"#install"},"インストール",-1)),t[10]||(t[10]=n("するには、指定された")),o(d,{href:"/ktor/server-modules",summary:"モジュールを使用すると、ルートをグループ化してアプリケーションを構造化できます。"},{default:r(()=>t[5]||(t[5]=[n("モジュール")])),_:1}),t[11]||(t[11]=n("の ")),t[12]||(t[12]=e("code",null,"install",-1)),t[13]||(t[13]=n(" 関数に渡します。 以下のコードスニペットは、")),t[14]||(t[14]=e("code",null,"PartialContent",-1)),t[15]||(t[15]=n(" をインストールする方法を示しています... "))]),o(k,null,{default:r(()=>t[16]||(t[16]=[e("li",null,[n(" ... "),e("code",null,"embeddedServer"),n(" 関数呼び出し内。 ")],-1),e("li",null,[n(" ... "),e("code",null,"Application"),n(" クラスの拡張関数である、明示的に定義された "),e("code",null,"module"),n(" 内。 ")],-1)])),_:1}),o(s,null,{default:r(()=>[o(a,{title:"embeddedServer"},{default:r(()=>[o(i,{lang:"kotlin",code:`            import io.ktor.server.engine.*
            import io.ktor.server.netty.*
            import io.ktor.server.application.*
            import io.ktor.server.plugins.partialcontent.*

            fun main() {
                embeddedServer(Netty, port = 8080) {
                    install(PartialContent)
                    // ...
                }.start(wait = true)
            }`})]),_:1}),o(a,{title:"module"},{default:r(()=>[o(i,{lang:"kotlin",code:`            import io.ktor.server.application.*
            import io.ktor.server.plugins.partialcontent.*
            // ...
            fun Application.module() {
                install(PartialContent)
                // ...
            }`})]),_:1})]),_:1}),t[19]||(t[19]=e("p",null,[e("code",null,"PartialContent"),n(" プラグインは、"),e("a",{href:"#install-route"},"特定のルートにインストール"),n("することもできます。 これは、異なるアプリケーションリソースに対して異なる "),e("code",null,"PartialContent"),n(" の設定が必要な場合に役立ちます。 ")],-1)),t[20]||(t[20]=e("p",null,[n("HTTPレンジリクエストを使用してファイルを配信するために "),e("code",null,"PartialContent"),n(" を使用する方法については、"),e("a",{href:"./server-responses#file"},"ファイル"),n("セクションを参照してください。")],-1))])}const I=v(b,[["render",T]]);export{w as __pageData,I as default};
