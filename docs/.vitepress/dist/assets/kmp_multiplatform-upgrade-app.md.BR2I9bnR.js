import{_ as r}from"./chunks/icon-1-done.B5D6C9SU.js";import{_ as d}from"./chunks/icon-2-done.e1N9yMQF.js";import{_ as E}from"./chunks/icon-3-done.D86i6ZaO.js";import{_ as o}from"./chunks/icon-4.CODFcxoy.js";import{_ as g}from"./chunks/icon-5-todo.DJgVODZv.js";import{_ as c,a as y}from"./chunks/multiplatform-mobile-upgrade-ios.C-YVNNGz.js";import{_ as F,a as u}from"./chunks/multiplatform-add-package.DxcZA53w.js";import{_ as C,C as e,c as m,o as B,j as i,G as n,ag as p,a,w as l}from"./chunks/framework.Bksy39di.js";const I=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"kmp/multiplatform-upgrade-app.md","filePath":"kmp/multiplatform-upgrade-app.md","lastUpdated":1755516278000}'),b={name:"kmp/multiplatform-upgrade-app.md"};function A(v,s,D,f,w,S){const h=e("secondary-label"),t=e("Links"),k=e("tldr");return B(),m("div",null,[s[22]||(s[22]=i("h1",{id:"åœ¨-ios-ä¸-android-ä¹‹é—´å…±äº«æ›´å¤šé€»è¾‘",tabindex:"-1"},[a("åœ¨ iOS ä¸ Android ä¹‹é—´å…±äº«æ›´å¤šé€»è¾‘ "),i("a",{class:"header-anchor",href:"#åœ¨-ios-ä¸-android-ä¹‹é—´å…±äº«æ›´å¤šé€»è¾‘","aria-label":'Permalink to "åœ¨ iOS ä¸ Android ä¹‹é—´å…±äº«æ›´å¤šé€»è¾‘"'},"â€‹")],-1)),n(h,{ref:"IntelliJ IDEA"},null,512),n(h,{ref:"Android Studio"},null,512),n(k,null,{default:l(()=>[s[19]||(s[19]=i("p",null,"æœ¬æ•™ç¨‹ä½¿ç”¨ IntelliJ IDEAï¼Œä½†ä½ ä¹Ÿå¯ä»¥åœ¨ Android Studio ä¸­è¿›è¡Œâ€”â€”è¿™ä¸¤ä¸ª IDE å…±äº«ç›¸åŒçš„æ ¸å¿ƒåŠŸèƒ½å’Œ Kotlin Multiplatform æ”¯æŒã€‚",-1)),s[20]||(s[20]=i("br",null,null,-1)),s[21]||(s[21]=i("p",null,[a("è¿™æ˜¯ "),i("strong",null,"åˆ›å»ºå…·æœ‰å…±äº«é€»è¾‘å’ŒåŸç”Ÿ UI çš„ Kotlin Multiplatform åº”ç”¨"),a(" æ•™ç¨‹çš„ç¬¬å››éƒ¨åˆ†ã€‚åœ¨ç»§ç»­ä¹‹å‰ï¼Œè¯·ç¡®ä¿ä½ å·²å®Œæˆå‰é¢çš„æ­¥éª¤ã€‚")],-1)),i("p",null,[s[3]||(s[3]=i("img",{src:r,width:"20",alt:"First step"},null,-1)),s[4]||(s[4]=a()),n(t,{href:"/kmp/multiplatform-create-first-app",summary:"This tutorial uses IntelliJ IDEA, but you can also follow it in Android Studio â€“ both IDEs share the same core functionality and Kotlin Multiplatform support. This is the first part of the Create a Kotlin Multiplatform app with shared logic and native UI tutorial. Create your Kotlin Multiplatform app Update the user interface Add dependencies Share more logic Wrap up your project"},{default:l(()=>s[0]||(s[0]=[a("åˆ›å»ºä½ çš„ Kotlin Multiplatform åº”ç”¨")])),_:1}),s[5]||(s[5]=i("br",null,null,-1)),s[6]||(s[6]=i("img",{src:d,width:"20",alt:"Second step"},null,-1)),s[7]||(s[7]=a()),n(t,{href:"/kmp/multiplatform-update-ui",summary:"This tutorial uses IntelliJ IDEA, but you can also follow it in Android Studio â€“ both IDEs share the same core functionality and Kotlin Multiplatform support. This is the second part of the Create a Kotlin Multiplatform app with shared logic and native UI tutorial. Before proceeding, make sure you've completed previous steps. Create your Kotlin Multiplatform app Update the user interface Add dependencies Share more logic Wrap up your project"},{default:l(()=>s[1]||(s[1]=[a("æ›´æ–°ç”¨æˆ·ç•Œé¢")])),_:1}),s[8]||(s[8]=i("br",null,null,-1)),s[9]||(s[9]=i("img",{src:E,width:"20",alt:"Third step"},null,-1)),s[10]||(s[10]=a()),n(t,{href:"/kmp/multiplatform-dependencies",summary:"This tutorial uses IntelliJ IDEA, but you can also follow it in Android Studio â€“ both IDEs share the same core functionality and Kotlin Multiplatform support. This is the third part of the Create a Kotlin Multiplatform app with shared logic and native UI tutorial. Before proceeding, make sure you've completed previous steps. Create your Kotlin Multiplatform app Update the user interface Add dependencies Share more logic Wrap up your project"},{default:l(()=>s[2]||(s[2]=[a("æ·»åŠ ä¾èµ–é¡¹")])),_:1}),s[11]||(s[11]=i("br",null,null,-1)),s[12]||(s[12]=i("img",{src:o,width:"20",alt:"Fourth step"},null,-1)),s[13]||(s[13]=a()),s[14]||(s[14]=i("strong",null,"å…±äº«æ›´å¤šé€»è¾‘",-1)),s[15]||(s[15]=i("br",null,null,-1)),s[16]||(s[16]=i("img",{src:g,width:"20",alt:"Fifth step"},null,-1)),s[17]||(s[17]=a(" å®Œæˆä½ çš„é¡¹ç›®")),s[18]||(s[18]=i("br",null,null,-1))])]),_:1}),s[23]||(s[23]=p(`<p>æ—¢ç„¶ä½ å·²ç»ä½¿ç”¨å¤–éƒ¨ä¾èµ–é¡¹å®ç°äº†é€šç”¨é€»è¾‘ï¼Œä½ å°±å¯ä»¥å¼€å§‹æ·»åŠ æ›´å¤æ‚çš„é€»è¾‘äº†ã€‚ç½‘ç»œè¯·æ±‚å’Œæ•°æ®åºåˆ—åŒ–æ˜¯ä½¿ç”¨ Kotlin Multiplatform å…±äº«ä»£ç çš„<a href="https://kotlinlang.org/lp/multiplatform/" target="_blank" rel="noreferrer">æœ€å—æ¬¢è¿çš„ç”¨ä¾‹</a>ã€‚å­¦ä¹ å¦‚ä½•åœ¨ä½ çš„ç¬¬ä¸€ä¸ªåº”ç”¨ç¨‹åºä¸­å®ç°è¿™äº›ï¼Œä»¥ä¾¿åœ¨å®Œæˆè¿™ä¸ªå…¥é—¨ä¹‹æ—…åï¼Œä½ å¯ä»¥åœ¨æœªæ¥çš„é¡¹ç›®ä¸­è¿ç”¨å®ƒä»¬ã€‚</p><p>æ›´æ–°åçš„åº”ç”¨å°†é€šè¿‡äº’è”ç½‘ä» <a href="https://github.com/r-spacex/SpaceX-API/tree/master/docs#rspacex-api-docs" target="_blank" rel="noreferrer">SpaceX API</a> æ£€ç´¢æ•°æ®ï¼Œå¹¶æ˜¾ç¤º SpaceX ç«ç®­ä¸Šæ¬¡æˆåŠŸå‘å°„çš„æ—¥æœŸã€‚</p><div class="note custom-block"><p class="custom-block-title">NOTE</p><p>ä½ å¯ä»¥åœ¨æˆ‘ä»¬çš„ GitHub ç‰ˆæœ¬åº“çš„ä¸¤ä¸ªåˆ†æ”¯ä¸­æ‰¾åˆ°é¡¹ç›®çš„æœ€ç»ˆçŠ¶æ€ï¼Œå®ƒä»¬å…·æœ‰ä¸åŒçš„åç¨‹è§£å†³æ–¹æ¡ˆï¼š * <a href="https://github.com/kotlin-hands-on/get-started-with-kmp/tree/main" target="_blank" rel="noreferrer"><code>main</code></a> åˆ†æ”¯åŒ…å« KMP-NativeCoroutines å®ç°ï¼Œ * <a href="https://github.com/kotlin-hands-on/get-started-with-kmp/tree/main-skie" target="_blank" rel="noreferrer"><code>main-skie</code></a> åˆ†æ”¯åŒ…å« SKIE å®ç°ã€‚</p></div><h2 id="æ·»åŠ æ›´å¤šä¾èµ–é¡¹" tabindex="-1">æ·»åŠ æ›´å¤šä¾èµ–é¡¹ <a class="header-anchor" href="#æ·»åŠ æ›´å¤šä¾èµ–é¡¹" aria-label="Permalink to &quot;æ·»åŠ æ›´å¤šä¾èµ–é¡¹&quot;">â€‹</a></h2><p>ä½ éœ€è¦åœ¨é¡¹ç›®ä¸­æ·»åŠ ä»¥ä¸‹å¤šå¹³å°åº“ï¼š</p><ul><li><a href="https://github.com/Kotlin/kotlinx.coroutines" target="_blank" rel="noreferrer"><code>kotlinx.coroutines</code></a>ï¼Œç”¨äºä½¿ç”¨åç¨‹å¤„ç†å¼‚æ­¥ä»£ç ï¼Œä»è€Œå®ç°å¹¶å‘æ“ä½œã€‚</li><li><a href="https://github.com/Kotlin/kotlinx.serialization" target="_blank" rel="noreferrer"><code>kotlinx.serialization</code></a>ï¼Œç”¨äºå°† JSON å“åº”ååºåˆ—åŒ–ä¸ºç”¨äºå¤„ç†ç½‘ç»œæ“ä½œçš„å®ä½“ç±»å¯¹è±¡ã€‚</li><li><a href="https://ktor.io/" target="_blank" rel="noreferrer">Ktor</a>ï¼Œä¸€ä¸ªç”¨äºåˆ›å»º HTTP å®¢æˆ·ç«¯ä»¥é€šè¿‡äº’è”ç½‘æ£€ç´¢æ•°æ®çš„æ¡†æ¶ã€‚</li></ul><h3 id="kotlinx-coroutines" tabindex="-1">kotlinx.coroutines <a class="header-anchor" href="#kotlinx-coroutines" aria-label="Permalink to &quot;kotlinx.coroutines&quot;">â€‹</a></h3><p>è¦å°† <code>kotlinx.coroutines</code> æ·»åŠ åˆ°ä½ çš„é¡¹ç›®ï¼Œè¯·åœ¨å…¬å…±æºä»£ç é›†ä¸­æŒ‡å®šä¸€ä¸ªä¾èµ–é¡¹ã€‚ä¸ºæ­¤ï¼Œè¯·å°†ä»¥ä¸‹è¡Œæ·»åŠ åˆ°å…±äº«æ¨¡å—çš„ <code>build.gradle.kts</code> æ–‡ä»¶ä¸­ï¼š</p><div class="language-kotlin vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">kotlin</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // ... </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    sourceSets</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        commonMain.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">dependencies</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">           // ...</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">           implementation</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;org.jetbrains.kotlinx:kotlinx-coroutines-core:1.10.2&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>Multiplatform Gradle æ’ä»¶ä¼šè‡ªåŠ¨ä¸º <code>kotlinx.coroutines</code> çš„å¹³å°ç‰¹æœ‰ï¼ˆiOS å’Œ Androidï¼‰éƒ¨åˆ†æ·»åŠ ä¸€ä¸ªä¾èµ–é¡¹ã€‚</p><h3 id="kotlinx-serialization" tabindex="-1">kotlinx.serialization <a class="header-anchor" href="#kotlinx-serialization" aria-label="Permalink to &quot;kotlinx.serialization&quot;">â€‹</a></h3><p>è¦ä½¿ç”¨ <code>kotlinx.serialization</code> åº“ï¼Œè¯·è®¾ç½®ç›¸åº”çš„ Gradle æ’ä»¶ã€‚ ä¸ºæ­¤ï¼Œè¯·å°†ä»¥ä¸‹è¡Œæ·»åŠ åˆ°å…±äº«æ¨¡å—çš„ <code>build.gradle.kts</code> æ–‡ä»¶å¼€å¤´çš„ç°æœ‰ <code>plugins {}</code> ä»£ç å—ä¸­ï¼š</p><div class="language-kotlin vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">plugins</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // ...</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    kotlin</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;plugin.serialization&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) version </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;2.2.0&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="ktor" tabindex="-1">Ktor <a class="header-anchor" href="#ktor" aria-label="Permalink to &quot;Ktor&quot;">â€‹</a></h3><p>ä½ éœ€è¦å°†æ ¸å¿ƒä¾èµ–é¡¹ (<code>ktor-client-core</code>) æ·»åŠ åˆ°å…±äº«æ¨¡å—çš„å…¬å…±æºä»£ç é›†ã€‚ ä½ è¿˜éœ€è¦æ·»åŠ æ”¯æŒæ€§ä¾èµ–é¡¹ï¼š</p><ul><li>æ·»åŠ  <code>ContentNegotiation</code> åŠŸèƒ½ (<code>ktor-client-content-negotiation</code>)ï¼Œå®ƒå…è®¸ä»¥ç‰¹å®šæ ¼å¼åºåˆ—åŒ–å’Œååºåˆ—åŒ–å†…å®¹ã€‚</li><li>æ·»åŠ  <code>ktor-serialization-kotlinx-json</code> ä¾èµ–é¡¹ä»¥æŒ‡ç¤º Ktor ä½¿ç”¨ JSON æ ¼å¼å’Œ <code>kotlinx.serialization</code> ä½œä¸ºåºåˆ—åŒ–åº“ã€‚Ktor å°†é¢„æœŸ JSON æ•°æ®å¹¶åœ¨æ¥æ”¶å“åº”æ—¶å°†å…¶ååºåˆ—åŒ–ä¸ºæ•°æ®ç±»ã€‚</li><li>é€šè¿‡åœ¨å¹³å°æºä»£ç é›†ä¸­æ·»åŠ å¯¹åº”æ„ä»¶çš„ä¾èµ–é¡¹æ¥æä¾›å¹³å°å¼•æ“ (<code>ktor-client-android</code>ã€<code>ktor-client-darwin</code>)ã€‚</li></ul><div class="language-kotlin vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">kotlin</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // ...</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    val</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ktorVersion </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;3.2.3&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    sourceSets</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        commonMain.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">dependencies</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            // ...</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">            implementation</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;io.ktor:ktor-client-core:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">$ktorVersion</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">            implementation</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;io.ktor:ktor-client-content-negotiation:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">$ktorVersion</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">            implementation</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;io.ktor:ktor-serialization-kotlinx-json:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">$ktorVersion</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        androidMain.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">dependencies</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">            implementation</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;io.ktor:ktor-client-android:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">$ktorVersion</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        iosMain.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">dependencies</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">            implementation</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;io.ktor:ktor-client-darwin:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">$ktorVersion</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>ç‚¹å‡» <strong>Sync Gradle Changes</strong> æŒ‰é’®åŒæ­¥ Gradle æ–‡ä»¶ã€‚</p><h2 id="åˆ›å»º-api-è¯·æ±‚" tabindex="-1">åˆ›å»º API è¯·æ±‚ <a class="header-anchor" href="#åˆ›å»º-api-è¯·æ±‚" aria-label="Permalink to &quot;åˆ›å»º API è¯·æ±‚&quot;">â€‹</a></h2><p>ä½ éœ€è¦ <a href="https://github.com/r-spacex/SpaceX-API/tree/master/docs#rspacex-api-docs" target="_blank" rel="noreferrer">SpaceX API</a> æ¥æ£€ç´¢æ•°æ®ï¼Œä½ å°†ä½¿ç”¨å•ä¸ªæ–¹æ³•ä» <strong>v4/launches</strong> ç«¯ç‚¹è·å–æ‰€æœ‰å‘å°„çš„åˆ—è¡¨ã€‚</p><h3 id="æ·»åŠ æ•°æ®æ¨¡å‹" tabindex="-1">æ·»åŠ æ•°æ®æ¨¡å‹ <a class="header-anchor" href="#æ·»åŠ æ•°æ®æ¨¡å‹" aria-label="Permalink to &quot;æ·»åŠ æ•°æ®æ¨¡å‹&quot;">â€‹</a></h3><p>åœ¨ <code>shared/src/commonMain/kotlin/.../greetingkmp</code> ç›®å½•ä¸­ï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„ <code>RocketLaunch.kt</code> æ–‡ä»¶å¹¶æ·»åŠ ä¸€ä¸ªæ•°æ®ç±»ï¼Œç”¨äºå­˜å‚¨æ¥è‡ª SpaceX API çš„æ•°æ®ï¼š</p><div class="language-kotlin vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> kotlinx.serialization.SerialName</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> kotlinx.serialization.Serializable</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">@Serializable</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">data</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> RocketLaunch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    @SerialName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;flight_number&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    val</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> flightNumber: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    @SerialName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    val</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> missionName: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    @SerialName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;date_utc&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    val</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> launchDateUTC: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    @SerialName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;success&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    val</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> launchSuccess: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Boolean</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">?,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><ul><li><code>RocketLaunch</code> ç±»æ ‡è®°æœ‰ <code>@Serializable</code> æ³¨è§£ï¼Œä»¥ä¾¿ <code>kotlinx.serialization</code> æ’ä»¶å¯ä»¥è‡ªåŠ¨ä¸ºå…¶ç”Ÿæˆé»˜è®¤åºåˆ—åŒ–å™¨ã€‚</li><li><code>@SerialName</code> æ³¨è§£å…è®¸ä½ é‡æ–°å®šä¹‰å­—æ®µåï¼Œä»è€Œå¯ä»¥åœ¨æ•°æ®ç±»ä¸­å£°æ˜å±æ€§æ—¶ä½¿ç”¨æ›´å¯è¯»çš„åç§°ã€‚</li></ul><h3 id="è¿æ¥-http-å®¢æˆ·ç«¯" tabindex="-1">è¿æ¥ HTTP å®¢æˆ·ç«¯ <a class="header-anchor" href="#è¿æ¥-http-å®¢æˆ·ç«¯" aria-label="Permalink to &quot;è¿æ¥ HTTP å®¢æˆ·ç«¯&quot;">â€‹</a></h3><ol><li><p>åœ¨ <code>shared/src/commonMain/kotlin/.../greetingkmp</code> ç›®å½•ä¸­ï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„ <code>RocketComponent</code> ç±»ã€‚</p></li><li><p>æ·»åŠ  <code>httpClient</code> å±æ€§ï¼Œä»¥ä¾¿é€šè¿‡ HTTP GET è¯·æ±‚æ£€ç´¢ç«ç®­å‘å°„ä¿¡æ¯ï¼š</p><div class="language-kotlin vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> io.ktor.client.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">*</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> io.ktor.client.plugins.contentnegotiation.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">*</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> io.ktor.serialization.kotlinx.json.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">*</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> kotlinx.serialization.json.Json</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> RocketComponent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> val</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> httpClient </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> HttpClient</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        install</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(ContentNegotiation) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">            json</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Json</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                prettyPrint </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                isLenient </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                ignoreUnknownKeys </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><ul><li><a href="https://ktor.io/docs/serialization-client.html#register_json" target="_blank" rel="noreferrer">ContentNegotiation Ktor æ’ä»¶</a>å’Œ JSON åºåˆ—åŒ–å™¨ä¼šååºåˆ—åŒ– GET è¯·æ±‚çš„ç»“æœã€‚</li><li>æ­¤å¤„çš„ JSON åºåˆ—åŒ–å™¨é…ç½®ä¸ºä½¿ç”¨ <code>prettyPrint</code> å±æ€§ä»¥æ›´å¯è¯»çš„æ–¹å¼æ‰“å° JSONã€‚å®ƒé€šè¿‡ <code>isLenient</code> åœ¨è¯»å–æ ¼å¼é”™è¯¯çš„ JSON æ—¶æ›´çµæ´»ï¼Œå¹¶ä¸”é€šè¿‡ <code>ignoreUnknownKeys</code> å¿½ç•¥äº†ç«ç®­å‘å°„æ¨¡å‹ä¸­å°šæœªå£°æ˜çš„é”®ã€‚</li></ul></li><li><p>å°† <code>getDateOfLastSuccessfulLaunch()</code> æŒ‚èµ·å‡½æ•°æ·»åŠ åˆ° <code>RocketComponent</code>ï¼š</p><div class="language-kotlin vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> RocketComponent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // ...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> suspend</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> fun</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> getDateOfLastSuccessfulLaunch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(): </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div></li><li><p>è°ƒç”¨ <code>httpClient.get()</code> å‡½æ•°ä»¥æ£€ç´¢ç«ç®­å‘å°„ä¿¡æ¯ï¼š</p><div class="language-kotlin vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> io.ktor.client.request.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">*</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> io.ktor.client.call.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">*</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> RocketComponent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // ...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> suspend</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> fun</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> getDateOfLastSuccessfulLaunch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(): </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        val</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> rockets: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">List</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">RocketLaunch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> httpClient.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://api.spacexdata.com/v4/launches&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">body</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><ul><li><code>httpClient.get()</code> ä¹Ÿæ˜¯ä¸€ä¸ªæŒ‚èµ·å‡½æ•°ï¼Œå› ä¸ºå®ƒéœ€è¦å¼‚æ­¥é€šè¿‡ç½‘ç»œæ£€ç´¢æ•°æ®è€Œä¸é˜»å¡çº¿ç¨‹ã€‚</li><li>æŒ‚èµ·å‡½æ•°åªèƒ½ä»åç¨‹æˆ–å…¶ä»–æŒ‚èµ·å‡½æ•°ä¸­è°ƒç”¨ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆ <code>getDateOfLastSuccessfulLaunch()</code> æ ‡è®°æœ‰ <code>suspend</code> å…³é”®å­—ã€‚ç½‘ç»œè¯·æ±‚åœ¨ HTTP å®¢æˆ·ç«¯çš„çº¿ç¨‹æ± ä¸­æ‰§è¡Œã€‚</li></ul></li><li><p>å†æ¬¡æ›´æ–°æ­¤å‡½æ•°ä»¥åœ¨åˆ—è¡¨ä¸­æ‰¾åˆ°ä¸Šæ¬¡æˆåŠŸå‘å°„ï¼š</p><div class="language-kotlin vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> RocketComponent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // ...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> suspend</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> fun</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> getDateOfLastSuccessfulLaunch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(): </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        val</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> rockets: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">List</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">RocketLaunch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> httpClient.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://api.spacexdata.com/v4/launches&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">body</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        val</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> lastSuccessLaunch </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> rockets.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">last</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { it.launchSuccess </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>ç«ç®­å‘å°„åˆ—è¡¨æŒ‰æ—¥æœŸä»æœ€æ—©åˆ°æœ€æ–°æ’åºã€‚</p></li><li><p>å°†å‘å°„æ—¥æœŸä» UTC è½¬æ¢ä¸ºä½ çš„æœ¬åœ°æ—¥æœŸå¹¶æ ¼å¼åŒ–è¾“å‡ºï¼š</p><div class="language-kotlin vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> kotlinx.datetime.TimeZone</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> kotlinx.datetime.toLocalDateTime</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> kotlin.time.Instant</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> RocketComponent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // ...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> suspend</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> fun</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> getDateOfLastSuccessfulLaunch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(): </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        val</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> rockets: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">List</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">RocketLaunch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            httpClient.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://api.spacexdata.com/v4/launches&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">body</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        val</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> lastSuccessLaunch </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> rockets.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">last</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { it.launchSuccess </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        val</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> date </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Instant.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">parse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(lastSuccessLaunch.launchDateUTC)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">toLocalDateTime</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(TimeZone.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">currentSystemDefault</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;\${date.month} \${date.day}, \${date.year}&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>æ—¥æœŸå°†é‡‡ç”¨ &quot;MMMM DD, YYYY&quot; æ ¼å¼ï¼Œä¾‹å¦‚ OCTOBER 5, 2022ã€‚</p></li><li><p>æ·»åŠ å¦ä¸€ä¸ªæŒ‚èµ·å‡½æ•° <code>launchPhrase()</code>ï¼Œå®ƒå°†ä½¿ç”¨ <code>getDateOfLastSuccessfulLaunch()</code> å‡½æ•°åˆ›å»ºä¸€æ¡æ¶ˆæ¯ï¼š</p><div class="language-kotlin vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> RocketComponent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // ...</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    suspend</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> fun</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> launchPhrase</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(): </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">String</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            &quot;The last successful launch was on \${</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getDateOfLastSuccessfulLaunch</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">()} ğŸš€&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (e: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Exception</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">            println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Exception during getting the date of the last successful launch </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">$e</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            &quot;Error occurred&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div></li></ol><h3 id="åˆ›å»ºæµ" tabindex="-1">åˆ›å»ºæµ <a class="header-anchor" href="#åˆ›å»ºæµ" aria-label="Permalink to &quot;åˆ›å»ºæµ&quot;">â€‹</a></h3><p>ä½ å¯ä»¥ä½¿ç”¨æµè€Œä¸æ˜¯æŒ‚èµ·å‡½æ•°ã€‚å®ƒä»¬å‘å°„ä¸€ç³»åˆ—å€¼ï¼Œè€Œä¸æ˜¯æŒ‚èµ·å‡½æ•°è¿”å›çš„å•ä¸ªå€¼ã€‚</p><ol><li><p>æ‰“å¼€ <code>shared/src/commonMain/kotlin</code> ç›®å½•ä¸­çš„ <code>Greeting.kt</code> æ–‡ä»¶ã€‚</p></li><li><p>å°† <code>rocketComponent</code> å±æ€§æ·»åŠ åˆ° <code>Greeting</code> ç±»ã€‚æ­¤å±æ€§å°†å­˜å‚¨åŒ…å«ä¸Šæ¬¡æˆåŠŸå‘å°„æ—¥æœŸçš„æ¶ˆæ¯ï¼š</p><div class="language-kotlin vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> val</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> rocketComponent </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> RocketComponent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span></code></pre></div></li><li><p>å°† <code>greet()</code> å‡½æ•°æ›´æ”¹ä¸ºè¿”å› <code>Flow</code>ï¼š</p><div class="language-kotlin vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> kotlinx.coroutines.delay</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> kotlinx.coroutines.flow.Flow</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> kotlinx.coroutines.flow.flow</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> kotlin.time.Duration.Companion.seconds</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Greeting</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // ...</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    fun</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> greet</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(): </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Flow</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> flow</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        emit</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (Random.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">nextBoolean</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()) </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Hi!&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> else</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Hello!&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        delay</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.seconds)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        emit</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Guess what this is! &gt; \${platform.name.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">reversed</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">()}&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        delay</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.seconds)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        emit</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">daysPhrase</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        emit</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(rocketComponent.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">launchPhrase</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><ul><li>æ­¤å¤„çš„ <code>Flow</code> æ˜¯ä½¿ç”¨ <code>flow()</code> æ„å»ºå™¨å‡½æ•°åˆ›å»ºçš„ï¼Œå®ƒåŒ…è£…äº†æ‰€æœ‰è¯­å¥ã€‚</li><li><code>Flow</code> ä»¥ä¸€ç§’çš„å»¶è¿Ÿå‘å°„å­—ç¬¦ä¸²ï¼Œæ¯æ¬¡å‘å°„ä¹‹é—´éƒ½æœ‰å»¶è¿Ÿã€‚æœ€åä¸€ä¸ªå…ƒç´ ä»…åœ¨ç½‘ç»œå“åº”è¿”å›åæ‰å‘å°„ï¼Œå› æ­¤ç¡®åˆ‡çš„å»¶è¿Ÿå–å†³äºä½ çš„ç½‘ç»œã€‚</li></ul></li></ol><h3 id="æ·»åŠ äº’è”ç½‘è®¿é—®æƒé™" tabindex="-1">æ·»åŠ äº’è”ç½‘è®¿é—®æƒé™ <a class="header-anchor" href="#æ·»åŠ äº’è”ç½‘è®¿é—®æƒé™" aria-label="Permalink to &quot;æ·»åŠ äº’è”ç½‘è®¿é—®æƒé™&quot;">â€‹</a></h3><p>è¦è®¿é—®äº’è”ç½‘ï¼ŒAndroid åº”ç”¨ç¨‹åºéœ€è¦é€‚å½“çš„æƒé™ã€‚ç”±äºæ‰€æœ‰ç½‘ç»œè¯·æ±‚éƒ½æ¥è‡ªå…±äº«æ¨¡å—ï¼Œå› æ­¤å°†äº’è”ç½‘è®¿é—®æƒé™æ·»åŠ åˆ°å…¶æ¸…å•ä¸­æœ‰æ„ä¹‰ã€‚</p><p>æ›´æ–°ä½ çš„ <code>composeApp/src/androidMain/AndroidManifest.xml</code> æ–‡ä»¶ä»¥åŒ…å«è®¿é—®æƒé™ï¼š</p><div class="language-xml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;?</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">xml</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;1.0&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> encoding</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;utf-8&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">?&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">manifest</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> xmlns:android</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;http://schemas.android.com/apk/res/android&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">uses-permission</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> android:name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;android.permission.INTERNET&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">/&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">manifest</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><p>ä½ å·²ç»é€šè¿‡å°† <code>greet()</code> å‡½æ•°çš„è¿”å›ç±»å‹æ›´æ”¹ä¸º <code>Flow</code> æ›´æ–°äº†å…±äº«æ¨¡å—çš„ APIã€‚ç°åœ¨ä½ éœ€è¦æ›´æ–°é¡¹ç›®çš„åŸç”Ÿéƒ¨åˆ†ï¼Œä»¥ä¾¿å®ƒä»¬å¯ä»¥æ­£ç¡®å¤„ç†è°ƒç”¨ <code>greet()</code> å‡½æ•°çš„ç»“æœã€‚</p><h2 id="æ›´æ–°åŸç”Ÿ-android-ui" tabindex="-1">æ›´æ–°åŸç”Ÿ Android UI <a class="header-anchor" href="#æ›´æ–°åŸç”Ÿ-android-ui" aria-label="Permalink to &quot;æ›´æ–°åŸç”Ÿ Android UI&quot;">â€‹</a></h2><p>ç”±äºå…±äº«æ¨¡å—å’Œ Android åº”ç”¨ç¨‹åºéƒ½æ˜¯ç”¨ Kotlin ç¼–å†™çš„ï¼Œå› æ­¤ä» Android ä½¿ç”¨å…±äº«ä»£ç æ˜¯ç®€å•æ˜äº†çš„ã€‚</p><h3 id="å¼•å…¥è§†å›¾æ¨¡å‹" tabindex="-1">å¼•å…¥è§†å›¾æ¨¡å‹ <a class="header-anchor" href="#å¼•å…¥è§†å›¾æ¨¡å‹" aria-label="Permalink to &quot;å¼•å…¥è§†å›¾æ¨¡å‹&quot;">â€‹</a></h3><p>ç°åœ¨åº”ç”¨ç¨‹åºå˜å¾—æ›´åŠ å¤æ‚ï¼Œæ˜¯æ—¶å€™ä¸ºåä¸º <code>MainActivity</code> çš„ <a href="https://developer.android.com/guide/components/activities/intro-activities" target="_blank" rel="noreferrer">Android activity</a> å¼•å…¥è§†å›¾æ¨¡å‹äº†ã€‚å®ƒè°ƒç”¨å®ç° UI çš„ <code>App()</code> å‡½æ•°ã€‚ è§†å›¾æ¨¡å‹å°†ç®¡ç†æ¥è‡ª activity çš„æ•°æ®ï¼Œå¹¶ä¸”åœ¨ activity ç»å†ç”Ÿå‘½å‘¨æœŸå˜åŒ–æ—¶ä¸ä¼šæ¶ˆå¤±ã€‚</p><ol><li><p>å°†ä»¥ä¸‹ä¾èµ–é¡¹æ·»åŠ åˆ°ä½ çš„ <code>composeApp/build.gradle.kts</code> æ–‡ä»¶ä¸­ï¼š</p><div class="language-kotlin vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">androidMain.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">dependencies</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // ...</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    implementation</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;androidx.lifecycle:lifecycle-viewmodel-ktx:2.6.2&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    implementation</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;androidx.lifecycle:lifecycle-runtime-compose:2.6.2&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    implementation</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;androidx.lifecycle:lifecycle-viewmodel-compose:2.6.2&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div></li><li><p>åœ¨ <code>composeApp/src/androidMain/kotlin/com/jetbrains/greeting/greetingkmp</code> ç›®å½•ä¸­ï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„ <code>MainViewModel</code> Kotlin ç±»ï¼š</p><div class="language-kotlin vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> androidx.lifecycle.ViewModel</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> MainViewModel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> : </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ViewModel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // ...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>æ­¤ç±»åˆ«ç»§æ‰¿ Android çš„ <code>ViewModel</code> ç±»ï¼Œè¿™ç¡®ä¿äº†å…³äºç”Ÿå‘½å‘¨æœŸå’Œé…ç½®æ›´æ”¹çš„æ­£ç¡®è¡Œä¸ºã€‚</p></li><li><p>åˆ›å»º <a href="https://kotlinlang.org/api/kotlinx.coroutines/kotlinx-coroutines-core/kotlinx.coroutines.flow/-state-flow/" target="_blank" rel="noreferrer">StateFlow</a> ç±»å‹çš„ <code>greetingList</code> å€¼åŠå…¶å¹•åå±æ€§ï¼š</p><div class="language-kotlin vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> kotlinx.coroutines.flow.MutableStateFlow</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> kotlinx.coroutines.flow.StateFlow</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> MainViewModel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> : </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ViewModel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> val</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> _greetingList </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> MutableStateFlow</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">List</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;&gt;(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">listOf</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    val</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> greetingList: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">StateFlow</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">List</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;&gt; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> _greetingList</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><ul><li>æ­¤å¤„çš„ <code>StateFlow</code> ç»§æ‰¿äº† <code>Flow</code> æ¥å£ï¼Œä½†å®ƒåªæœ‰ä¸€ä¸ªå€¼æˆ–çŠ¶æ€ã€‚</li><li>ç§æœ‰å¹•åå±æ€§ <code>_greetingList</code> ç¡®ä¿åªæœ‰æ­¤ç±»çš„å®¢æˆ·ç«¯å¯ä»¥è®¿é—®åªè¯» <code>greetingList</code> å±æ€§ã€‚</li></ul></li><li><p>åœ¨è§†å›¾æ¨¡å‹çš„ <code>init</code> å‡½æ•°ä¸­ï¼Œä» <code>Greeting().greet()</code> æµä¸­æ”¶é›†æ‰€æœ‰å­—ç¬¦ä¸²ï¼š</p><div class="language-kotlin vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> androidx.lifecycle.viewModelScope</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> kotlinx.coroutines.launch</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> MainViewModel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> : </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ViewModel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">   private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> val</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> _greetingList </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> MutableStateFlow</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">List</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;&gt;(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">listOf</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">   val</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> greetingList: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">StateFlow</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">List</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;&gt; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> _greetingList</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">   </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">   init</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       viewModelScope.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">launch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">           Greeting</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">greet</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">collect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { phrase </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                //...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">           }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">   }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>ç”±äº <code>collect()</code> å‡½æ•°æ˜¯æŒ‚èµ·çš„ï¼Œå› æ­¤ <code>launch</code> åç¨‹åœ¨è§†å›¾æ¨¡å‹çš„ä½œç”¨åŸŸå†…ä½¿ç”¨ã€‚ è¿™æ„å‘³ç€ <code>launch</code> åç¨‹å°†ä»…åœ¨è§†å›¾æ¨¡å‹ç”Ÿå‘½å‘¨æœŸçš„æ­£ç¡®é˜¶æ®µè¿è¡Œã€‚</p></li><li><p>åœ¨ <code>collect</code> å°¾éƒ¨ lambda è¡¨è¾¾å¼ä¸­ï¼Œæ›´æ–° <code>_greetingList</code> çš„å€¼ï¼Œå°†æ”¶é›†åˆ°çš„ <code>phrase</code> é™„åŠ åˆ° <code>list</code> ä¸­çš„çŸ­è¯­åˆ—è¡¨ï¼š</p><div class="language-kotlin vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> kotlinx.coroutines.flow.update</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> MainViewModel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> : </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ViewModel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    //...</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    init</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        viewModelScope.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">launch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">            Greeting</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">greet</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">collect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { phrase </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                _greetingList.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">update</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { list </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> list </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> phrase }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p><code>update()</code> å‡½æ•°å°†è‡ªåŠ¨æ›´æ–°å€¼ã€‚</p></li></ol><h3 id="ä½¿ç”¨è§†å›¾æ¨¡å‹çš„æµ" tabindex="-1">ä½¿ç”¨è§†å›¾æ¨¡å‹çš„æµ <a class="header-anchor" href="#ä½¿ç”¨è§†å›¾æ¨¡å‹çš„æµ" aria-label="Permalink to &quot;ä½¿ç”¨è§†å›¾æ¨¡å‹çš„æµ&quot;">â€‹</a></h3><ol><li><p>åœ¨ <code>composeApp/src/androidMain/kotlin</code> ä¸­ï¼Œæ‰“å¼€ <code>App.kt</code> æ–‡ä»¶å¹¶æ›´æ–°å®ƒï¼Œæ›¿æ¢ä¹‹å‰çš„å®ç°ï¼š</p><div class="language-kotlin vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> androidx.lifecycle.compose.collectAsStateWithLifecycle</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> androidx.compose.runtime.getValue</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> androidx.lifecycle.viewmodel.compose.viewModel</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">@Composable</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">fun</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> App</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(mainViewModel: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">MainViewModel</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> viewModel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    MaterialTheme</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        val</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> greetings </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">by</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> mainViewModel.greetingList.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">collectAsStateWithLifecycle</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        Column</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            modifier </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Modifier</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">safeContentPadding</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">fillMaxSize</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            verticalArrangement </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Arrangement.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">spacedBy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">8</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.dp),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        ) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            greetings.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">forEach</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { greeting </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">                Text</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(greeting)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">                HorizontalDivider</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><ul><li><code>greetingList</code> ä¸Šçš„ <code>collectAsStateWithLifecycle()</code> å‡½æ•°è°ƒç”¨ä¼šä» ViewModel çš„æµä¸­æ”¶é›†å€¼ï¼Œå¹¶ä»¥ç”Ÿå‘½å‘¨æœŸæ„ŸçŸ¥çš„æ–¹å¼å°†å…¶è¡¨ç¤ºä¸ºå¯ç»„åˆçŠ¶æ€ã€‚</li><li>åˆ›å»ºæ–°æµæ—¶ï¼Œç»„åˆçŠ¶æ€å°†æ›´æ”¹å¹¶æ˜¾ç¤ºä¸€ä¸ªå¯æ»šåŠ¨çš„ <code>Column</code>ï¼Œå…¶ä¸­é—®å€™çŸ­è¯­å‚ç›´æ’åˆ—å¹¶ç”±åˆ†éš”ç¬¦åˆ†éš”ã€‚</li></ul></li><li><p>è¦æŸ¥çœ‹ç»“æœï¼Œè¯·é‡æ–°è¿è¡Œä½ çš„ <strong>composeApp</strong> é…ç½®ï¼š</p><p><img src="`+c+`" alt="æœ€ç»ˆç»“æœ" width="300"></p></li></ol><h2 id="æ›´æ–°åŸç”Ÿ-ios-ui" tabindex="-1">æ›´æ–°åŸç”Ÿ iOS UI <a class="header-anchor" href="#æ›´æ–°åŸç”Ÿ-ios-ui" aria-label="Permalink to &quot;æ›´æ–°åŸç”Ÿ iOS UI&quot;">â€‹</a></h2><p>å¯¹äºé¡¹ç›®çš„ iOS éƒ¨åˆ†ï¼Œä½ å°†å†æ¬¡åˆ©ç”¨ <a href="https://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93viewmodel" target="_blank" rel="noreferrer">Model-View-ViewModel</a> æ¨¡å¼æ¥è¿æ¥ UI å’ŒåŒ…å«æ‰€æœ‰ä¸šåŠ¡é€»è¾‘çš„å…±äº«æ¨¡å—ã€‚</p><p>è¯¥æ¨¡å—å·²é€šè¿‡ <code>import Shared</code> å£°æ˜å¯¼å…¥åˆ° <code>ContentView.swift</code> æ–‡ä»¶ä¸­ã€‚</p><h3 id="å¼•å…¥-viewmodel" tabindex="-1">å¼•å…¥ ViewModel <a class="header-anchor" href="#å¼•å…¥-viewmodel" aria-label="Permalink to &quot;å¼•å…¥ ViewModel&quot;">â€‹</a></h3><p>åœ¨ <code>iosApp/ContentView.swift</code> ä¸­ï¼Œä¸º <code>ContentView</code> åˆ›å»ºä¸€ä¸ª <code>ViewModel</code> ç±»ï¼Œå®ƒå°†ä¸ºå…¶å‡†å¤‡å’Œç®¡ç†æ•°æ®ã€‚ åœ¨ <code>task()</code> è°ƒç”¨ä¸­è°ƒç”¨ <code>startObserving()</code> å‡½æ•°ä»¥æ”¯æŒå¹¶å‘ï¼š</p><div class="language-swift vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">swift</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> SwiftUI</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Shared</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">struct</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ContentView</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">View </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    @ObservedObject</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> private</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">set</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> viewModel: ViewModel</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> body: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">some</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> View {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        ListView</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">phrases</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: viewModel.greetings)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            .</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">task</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">await</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.viewModel.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">startObserving</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">extension</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ContentView</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    @MainActor</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ViewModel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ObservableObject </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        @Published</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> greetings: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Array</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> []</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        func</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> startObserving</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            // ...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">struct</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ListView</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">View </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> phrases: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Array</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> body: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">some</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> View {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        List</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(phrases, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: \\.</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            Text</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">$0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><ul><li><code>ViewModel</code> è¢«å£°æ˜ä¸º <code>ContentView</code> çš„æ‰©å±•ï¼Œå› ä¸ºå®ƒä»¬ç´§å¯†å…³è”ã€‚</li><li><code>ViewModel</code> æœ‰ä¸€ä¸ª <code>greetings</code> å±æ€§ï¼Œå®ƒæ˜¯ä¸€ä¸ª <code>String</code> çŸ­è¯­æ•°ç»„ã€‚ SwiftUI å°† ViewModel (<code>ContentView.ViewModel</code>) è¿æ¥åˆ°è§†å›¾ (<code>ContentView</code>)ã€‚</li><li><code>ContentView.ViewModel</code> è¢«å£°æ˜ä¸º <code>ObservableObject</code>ã€‚</li><li><code>@Published</code> åŒ…è£…å™¨ç”¨äº <code>greetings</code> å±æ€§ã€‚</li><li><code>@ObservedObject</code> å±æ€§åŒ…è£…å™¨ç”¨äºè®¢é˜… ViewModelã€‚</li></ul><p>æ­¤ ViewModel å°†åœ¨æ¯æ¬¡æ­¤å±æ€§æ›´æ”¹æ—¶å‘å°„ä¿¡å·ã€‚ ç°åœ¨ä½ éœ€è¦å®ç° <code>startObserving()</code> å‡½æ•°æ¥æ¶ˆè´¹æµã€‚</p><h3 id="é€‰æ‹©ä¸€ä¸ªåº“æ¥ä»-ios-æ¶ˆè´¹æµ" tabindex="-1">é€‰æ‹©ä¸€ä¸ªåº“æ¥ä» iOS æ¶ˆè´¹æµ <a class="header-anchor" href="#é€‰æ‹©ä¸€ä¸ªåº“æ¥ä»-ios-æ¶ˆè´¹æµ" aria-label="Permalink to &quot;é€‰æ‹©ä¸€ä¸ªåº“æ¥ä» iOS æ¶ˆè´¹æµ&quot;">â€‹</a></h3><p>åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨ <a href="https://skie.touchlab.co/" target="_blank" rel="noreferrer">SKIE</a> æˆ– <a href="https://github.com/rickclephas/KMP-NativeCoroutines" target="_blank" rel="noreferrer">KMP-NativeCoroutines</a> åº“æ¥å¸®åŠ©ä½ åœ¨ iOS ä¸­å¤„ç†æµã€‚ ä¸¤è€…éƒ½æ˜¯æ”¯æŒæµçš„å–æ¶ˆå’Œæ³›å‹çš„å¼€æºè§£å†³æ–¹æ¡ˆï¼Œè€Œ Kotlin/Native ç¼–è¯‘å™¨å°šæœªé»˜è®¤æä¾›è¿™äº›åŠŸèƒ½ï¼š</p><ul><li>SKIE åº“å¢å¼ºäº† Kotlin ç¼–è¯‘å™¨ç”Ÿæˆçš„ Objective-C APIï¼šSKIE å°†æµè½¬æ¢ä¸º Swift çš„ <code>AsyncSequence</code> çš„ç­‰ä»·å½¢å¼ã€‚SKIE ç›´æ¥æ”¯æŒ Swift çš„ <code>async</code>/<code>await</code>ï¼Œæ²¡æœ‰çº¿ç¨‹é™åˆ¶ï¼Œå¹¶å…·æœ‰è‡ªåŠ¨åŒå‘å–æ¶ˆï¼ˆCombine å’Œ RxSwift éœ€è¦é€‚é…å™¨ï¼‰ã€‚SKIE æä¾›å…¶ä»–ç‰¹æ€§ï¼Œå¯ä»¥ä» Kotlin ç”Ÿæˆ Swift å‹å¥½çš„ APIï¼ŒåŒ…æ‹¬å°†å„ç§ Kotlin ç±»å‹æ¡¥æ¥åˆ° Swift ç­‰ä»·ç±»å‹ã€‚å®ƒä¹Ÿä¸éœ€è¦åœ¨ iOS é¡¹ç›®ä¸­æ·»åŠ é¢å¤–çš„ä¾èµ–é¡¹ã€‚</li><li>KMP-NativeCoroutines åº“é€šè¿‡ç”Ÿæˆå¿…è¦çš„åŒ…è£…å™¨æ¥å¸®åŠ©ä½ ä» iOS æ¶ˆè´¹æŒ‚èµ·å‡½æ•°å’Œæµã€‚ KMP-NativeCoroutines æ”¯æŒ Swift çš„ <code>async</code>/<code>await</code> åŠŸèƒ½ä»¥åŠ Combine å’Œ RxSwiftã€‚ ä½¿ç”¨ KMP-NativeCoroutines éœ€è¦åœ¨ iOS é¡¹ç›®ä¸­æ·»åŠ  SPM æˆ– CocoaPod ä¾èµ–é¡¹ã€‚</li></ul>`,52)),s[24]||(s[24]=i("h3",{"initial-collapse-state":"collapsed",collapsible:"true",id:"é€‰é¡¹-1-é…ç½®-kmp-nativecoroutines",tabindex:"-1"},[a("é€‰é¡¹ 1. é…ç½® KMP-NativeCoroutines "),i("a",{class:"header-anchor",href:"#é€‰é¡¹-1-é…ç½®-kmp-nativecoroutines","aria-label":'Permalink to "é€‰é¡¹ 1. é…ç½® KMP-NativeCoroutines {initial-collapse-state="collapsed" collapsible="true"}"'},"â€‹")],-1)),s[25]||(s[25]=p(`<div class="note custom-block"><p class="custom-block-title">NOTE</p><p>æˆ‘ä»¬å»ºè®®ä½¿ç”¨è¯¥åº“çš„æœ€æ–°ç‰ˆæœ¬ã€‚ æŸ¥çœ‹ <a href="https://github.com/rickclephas/KMP-NativeCoroutines/releases" target="_blank" rel="noreferrer">KMP-NativeCoroutines ç‰ˆæœ¬åº“</a>ä»¥äº†è§£æ˜¯å¦æœ‰æ›´æ–°ç‰ˆæœ¬çš„æ’ä»¶å¯ç”¨ã€‚</p></div><ol><li><p>åœ¨é¡¹ç›®çš„æ ¹ <code>build.gradle.kts</code> æ–‡ä»¶ä¸­ï¼ˆ<strong>ä¸æ˜¯</strong> <code>shared/build.gradle.kts</code> æ–‡ä»¶ï¼‰ï¼Œå°† KSP (Kotlin Symbol Processor) å’Œ KMP-NativeCoroutines æ’ä»¶æ·»åŠ åˆ° <code>plugins {}</code> ä»£ç å—ä¸­ï¼š</p><div class="language-kotlin vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">plugins</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // ...</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;com.google.devtools.ksp&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;2.2.0-2.0.2&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">apply</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;com.rickclephas.kmp.nativecoroutines&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;1.0.0-ALPHA-45&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">apply</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div></li><li><p>åœ¨ <code>shared/build.gradle.kts</code> æ–‡ä»¶ä¸­ï¼Œæ·»åŠ  KMP-NativeCoroutines æ’ä»¶ï¼š</p><div class="language-kotlin vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">plugins</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // ...</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;com.google.devtools.ksp&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;com.rickclephas.kmp.nativecoroutines&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div></li><li><p>åŒæ ·åœ¨ <code>shared/build.gradle.kts</code> æ–‡ä»¶ä¸­ï¼Œé€‰æ‹©å¯ç”¨å®éªŒæ€§çš„ <code>@ObjCName</code> æ³¨è§£ï¼š</p><div class="language-kotlin vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">kotlin</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // ...</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    sourceSets</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        all</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">            languageSettings</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">                optIn</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;kotlin.experimental.ExperimentalObjCName&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">                optIn</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;kotlin.time.ExperimentalTime&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // ...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div></li><li><p>ç‚¹å‡» <strong>Sync Gradle Changes</strong> æŒ‰é’®åŒæ­¥ Gradle æ–‡ä»¶ã€‚</p></li></ol><h4 id="ä½¿ç”¨-kmp-nativecoroutines-æ ‡è®°æµ" tabindex="-1">ä½¿ç”¨ KMP-NativeCoroutines æ ‡è®°æµ <a class="header-anchor" href="#ä½¿ç”¨-kmp-nativecoroutines-æ ‡è®°æµ" aria-label="Permalink to &quot;ä½¿ç”¨ KMP-NativeCoroutines æ ‡è®°æµ&quot;">â€‹</a></h4><ol><li><p>æ‰“å¼€ <code>shared/src/commonMain/kotlin</code> ç›®å½•ä¸­çš„ <code>Greeting.kt</code> æ–‡ä»¶ã€‚</p></li><li><p>å°† <code>@NativeCoroutines</code> æ³¨è§£æ·»åŠ åˆ° <code>greet()</code> å‡½æ•°ã€‚è¿™å°†ç¡®ä¿æ’ä»¶ç”Ÿæˆæ­£ç¡®çš„ä»£ç ä»¥æ”¯æŒ iOS ä¸Šæ­£ç¡®çš„æµå¤„ç†ï¼š</p><div class="language-kotlin vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> import</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> com.rickclephas.kmp.nativecoroutines.NativeCoroutines</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Greeting</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     // ...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">     @NativeCoroutines</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">     fun</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> greet</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(): </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Flow</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> flow</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">         // ...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">     }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }</span></span></code></pre></div></li></ol><h4 id="åœ¨-xcode-ä¸­ä½¿ç”¨-spm-å¯¼å…¥åº“" tabindex="-1">åœ¨ XCode ä¸­ä½¿ç”¨ SPM å¯¼å…¥åº“ <a class="header-anchor" href="#åœ¨-xcode-ä¸­ä½¿ç”¨-spm-å¯¼å…¥åº“" aria-label="Permalink to &quot;åœ¨ XCode ä¸­ä½¿ç”¨ SPM å¯¼å…¥åº“&quot;">â€‹</a></h4><ol><li><p>è½¬åˆ° <strong>File</strong> | <strong>Open Project in Xcode</strong>ã€‚</p></li><li><p>åœ¨ Xcode ä¸­ï¼Œå³é”®å•å‡»å·¦ä¾§èœå•ä¸­çš„ <code>iosApp</code> é¡¹ç›®ï¼Œç„¶åé€‰æ‹© <strong>Add Package Dependencies</strong>ã€‚</p></li><li><p>åœ¨æœç´¢æ ä¸­ï¼Œè¾“å…¥åŒ…åï¼š</p><div class="language-none vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">none</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>https://github.com/rickclephas/KMP-NativeCoroutines.git</span></span></code></pre></div><p><img src="`+F+'" alt="å¯¼å…¥ KMP-NativeCoroutines" width="700"></p></li><li><p>åœ¨ <strong>Dependency Rule</strong> ä¸‹æ‹‰èœå•ä¸­ï¼Œé€‰æ‹© <strong>Exact Version</strong> é¡¹ï¼Œå¹¶åœ¨ç›¸é‚»å­—æ®µä¸­è¾“å…¥ <code>1.0.0-ALPHA-45</code> ç‰ˆæœ¬ã€‚</p></li><li><p>ç‚¹å‡» <strong>Add Package</strong> æŒ‰é’®ï¼šXcode å°†ä» GitHub è·å–åŒ…å¹¶æ‰“å¼€å¦ä¸€ä¸ªçª—å£ä»¥é€‰æ‹©åŒ…äº§å“ã€‚</p></li><li><p>å°† &quot;KMPNativeCoroutinesAsync&quot; å’Œ &quot;KMPNativeCoroutinesCore&quot; æ·»åŠ åˆ°ä½ çš„åº”ç”¨ä¸­ï¼Œå¦‚å›¾æ‰€ç¤ºï¼Œç„¶åç‚¹å‡» <strong>Add Package</strong>ï¼š</p><p><img src="'+u+`" alt="æ·»åŠ  KMP-NativeCoroutines åŒ…" width="500"></p></li></ol><p>è¿™å°†å®‰è£… KMP-NativeCoroutines åŒ…ä¸­å¤„ç† <code>async/await</code> æœºåˆ¶æ‰€å¿…éœ€çš„éƒ¨åˆ†ã€‚</p><h4 id="ä½¿ç”¨-kmp-nativecoroutines-åº“æ¶ˆè´¹æµ" tabindex="-1">ä½¿ç”¨ KMP-NativeCoroutines åº“æ¶ˆè´¹æµ <a class="header-anchor" href="#ä½¿ç”¨-kmp-nativecoroutines-åº“æ¶ˆè´¹æµ" aria-label="Permalink to &quot;ä½¿ç”¨ KMP-NativeCoroutines åº“æ¶ˆè´¹æµ&quot;">â€‹</a></h4><ol><li><p>åœ¨ <code>iosApp/ContentView.swift</code> ä¸­ï¼Œæ›´æ–° <code>startObserving()</code> å‡½æ•°ï¼Œä»¥ä¾¿ä¸º <code>Greeting().greet()</code> å‡½æ•°ä½¿ç”¨ KMP-NativeCoroutine çš„ <code>asyncSequence()</code> å‡½æ•°æ¥æ¶ˆè´¹æµï¼š</p><div class="language-Swift vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">Swift</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">func</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> startObserving</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">async</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    do</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> sequence </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> asyncSequence</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Greeting</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">greet</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        for</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> try</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> phrase </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> sequence {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.greetings.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">append</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(phrase)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Failed with error: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\\(error)</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>æ­¤å¤„çš„å¾ªç¯å’Œ <code>await</code> æœºåˆ¶ç”¨äºè¿­ä»£æµï¼Œå¹¶åœ¨æ¯æ¬¡æµå‘å°„å€¼æ—¶æ›´æ–° <code>greetings</code> å±æ€§ã€‚</p></li><li><p>ç¡®ä¿ <code>ViewModel</code> æ ‡è®°æœ‰ <code>@MainActor</code> æ³¨è§£ã€‚æ­¤æ³¨è§£ç¡®ä¿ <code>ViewModel</code> ä¸­çš„æ‰€æœ‰å¼‚æ­¥æ“ä½œéƒ½åœ¨ä¸»çº¿ç¨‹ä¸Šè¿è¡Œï¼Œä»¥ç¬¦åˆ Kotlin/Native è¦æ±‚ï¼š</p><div class="language-Swift vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">Swift</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ...</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> KMPNativeCoroutinesAsync</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> KMPNativeCoroutinesCore</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ...</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">extension</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ContentView</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    @MainActor</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ViewModel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ObservableObject </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        @Published</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> greetings: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Array</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> []</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        func</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> startObserving</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">async</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            do</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> sequence </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> asyncSequence</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Greeting</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">greet</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                for</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> try</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> phrase </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> sequence {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">                    self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.greetings.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">append</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(phrase)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">                print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Failed with error: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\\(error)</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div></li></ol>`,9)),s[26]||(s[26]=i("h3",{"initial-collapse-state":"collapsed",collapsible:"true",id:"é€‰é¡¹-2-é…ç½®-skie",tabindex:"-1"},[a("é€‰é¡¹ 2. é…ç½® SKIE "),i("a",{class:"header-anchor",href:"#é€‰é¡¹-2-é…ç½®-skie","aria-label":'Permalink to "é€‰é¡¹ 2. é…ç½® SKIE {initial-collapse-state="collapsed" collapsible="true"}"'},"â€‹")],-1)),s[27]||(s[27]=p(`<p>è¦è®¾ç½®è¯¥åº“ï¼Œè¯·åœ¨ <code>shared/build.gradle.kts</code> ä¸­æŒ‡å®š SKIE æ’ä»¶ï¼Œç„¶åç‚¹å‡» <strong>Sync Gradle Changes</strong> æŒ‰é’®ã€‚</p><div class="language-kotlin vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">plugins</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">   id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;co.touchlab.skie&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) version </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;0.10.4&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h4 id="ä½¿ç”¨-skie-æ¶ˆè´¹æµ" tabindex="-1">ä½¿ç”¨ SKIE æ¶ˆè´¹æµ <a class="header-anchor" href="#ä½¿ç”¨-skie-æ¶ˆè´¹æµ" aria-label="Permalink to &quot;ä½¿ç”¨ SKIE æ¶ˆè´¹æµ&quot;">â€‹</a></h4><p>ä½ å°†ä½¿ç”¨å¾ªç¯å’Œ <code>await</code> æœºåˆ¶æ¥è¿­ä»£ <code>Greeting().greet()</code> æµï¼Œå¹¶åœ¨æ¯æ¬¡æµå‘å°„å€¼æ—¶æ›´æ–° <code>greetings</code> å±æ€§ã€‚</p><p>ç¡®ä¿ <code>ViewModel</code> æ ‡è®°æœ‰ <code>@MainActor</code> æ³¨è§£ã€‚ æ­¤æ³¨è§£ç¡®ä¿ <code>ViewModel</code> ä¸­çš„æ‰€æœ‰å¼‚æ­¥æ“ä½œéƒ½åœ¨ä¸»çº¿ç¨‹ä¸Šè¿è¡Œï¼Œä»¥ç¬¦åˆ Kotlin/Native è¦æ±‚ï¼š</p><div class="language-Swift vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">Swift</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ...</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">extension</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ContentView</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    @MainActor</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ViewModel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ObservableObject </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        @Published</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> greetings: [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> []</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        func</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> startObserving</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">async</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            for</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> phrase </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">in</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Greeting</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">greet</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">                self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.greetings.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">append</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(phrase)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="æ¶ˆè´¹-viewmodel-å¹¶è¿è¡Œ-ios-åº”ç”¨" tabindex="-1">æ¶ˆè´¹ ViewModel å¹¶è¿è¡Œ iOS åº”ç”¨ <a class="header-anchor" href="#æ¶ˆè´¹-viewmodel-å¹¶è¿è¡Œ-ios-åº”ç”¨" aria-label="Permalink to &quot;æ¶ˆè´¹ ViewModel å¹¶è¿è¡Œ iOS åº”ç”¨&quot;">â€‹</a></h3><p>åœ¨ <code>iosApp/iOSApp.swift</code> ä¸­ï¼Œæ›´æ–°ä½ çš„åº”ç”¨çš„å…¥å£ç‚¹ï¼š</p><div class="language-swift vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">swift</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@main</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">struct</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> iOSApp</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">App </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">   var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> body: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">some</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Scene {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">       WindowGroup</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">           ContentView</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">viewModel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: ContentView.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">ViewModel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">   }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>ä» IntelliJ IDEA è¿è¡Œ <strong>iosApp</strong> é…ç½®ï¼Œä»¥ç¡®ä¿ä½ çš„åº”ç”¨çš„é€»è¾‘å·²åŒæ­¥ï¼š</p><p><img src="`+y+'" alt="æœ€ç»ˆç»“æœ" width="300"></p><div class="note custom-block"><p class="custom-block-title">NOTE</p><p>ä½ å¯ä»¥åœ¨æˆ‘ä»¬çš„ GitHub ç‰ˆæœ¬åº“çš„ä¸¤ä¸ªåˆ†æ”¯ä¸­æ‰¾åˆ°é¡¹ç›®çš„æœ€ç»ˆçŠ¶æ€ï¼Œå®ƒä»¬å…·æœ‰ä¸åŒçš„åç¨‹è§£å†³æ–¹æ¡ˆï¼š * <a href="https://github.com/kotlin-hands-on/get-started-with-kmp/tree/main" target="_blank" rel="noreferrer"><code>main</code></a> åˆ†æ”¯åŒ…å« KMP-NativeCoroutines å®ç°ï¼Œ * <a href="https://github.com/kotlin-hands-on/get-started-with-kmp/tree/main-skie" target="_blank" rel="noreferrer"><code>main-skie</code></a> åˆ†æ”¯åŒ…å« SKIE å®ç°ã€‚</p></div><h2 id="ä¸‹ä¸€æ­¥" tabindex="-1">ä¸‹ä¸€æ­¥ <a class="header-anchor" href="#ä¸‹ä¸€æ­¥" aria-label="Permalink to &quot;ä¸‹ä¸€æ­¥&quot;">â€‹</a></h2><p>åœ¨æ•™ç¨‹çš„æœ€åä¸€éƒ¨åˆ†ï¼Œä½ å°†å®Œæˆä½ çš„é¡¹ç›®å¹¶äº†è§£æ¥ä¸‹æ¥è¦é‡‡å–çš„æ­¥éª¤ã€‚</p><p><strong><a href="./multiplatform-wrap-up">ç»§ç»­ä¸‹ä¸€éƒ¨åˆ†</a></strong></p><h3 id="å¦è¯·å‚è§" tabindex="-1">å¦è¯·å‚è§ <a class="header-anchor" href="#å¦è¯·å‚è§" aria-label="Permalink to &quot;å¦è¯·å‚è§&quot;">â€‹</a></h3><ul><li>æ¢ç©¶<a href="https://kotlinlang.org/docs/composing-suspending-functions.html" target="_blank" rel="noreferrer">æŒ‚èµ·å‡½æ•°çš„ç»„åˆ</a>çš„å„ç§æ–¹æ³•ã€‚</li><li>äº†è§£æ›´å¤šå…³äº<a href="https://kotlinlang.org/docs/native-objc-interop.html" target="_blank" rel="noreferrer">ä¸ Objective-C framework å’Œåº“çš„äº’æ“ä½œæ€§</a>ã€‚</li><li>å®Œæˆæ­¤<a href="./multiplatform-ktor-sqldelight">ç½‘ç»œå’Œæ•°æ®å­˜å‚¨</a>æ•™ç¨‹ã€‚</li></ul><h2 id="è·å–å¸®åŠ©" tabindex="-1">è·å–å¸®åŠ© <a class="header-anchor" href="#è·å–å¸®åŠ©" aria-label="Permalink to &quot;è·å–å¸®åŠ©&quot;">â€‹</a></h2><ul><li><strong>Kotlin Slack</strong>ã€‚è·å–<a href="https://surveys.jetbrains.com/s3/kotlin-slack-sign-up" target="_blank" rel="noreferrer">é‚€è¯·</a>å¹¶åŠ å…¥ <a href="https://kotlinlang.slack.com/archives/C3PQML5NU" target="_blank" rel="noreferrer">#multiplatform</a> é¢‘é“ã€‚</li><li><strong>Kotlin é—®é¢˜è¿½è¸ªå™¨</strong>ã€‚<a href="https://youtrack.jetbrains.com/newIssue?project=KT" target="_blank" rel="noreferrer">æŠ¥å‘Šæ–°é—®é¢˜</a>ã€‚</li></ul>',19))])}const L=C(b,[["render",A]]);export{I as __pageData,L as default};
