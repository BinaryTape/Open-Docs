import{_ as E,C as a,c as y,o as _,G as s,ag as h,j as e,w as t,a as n}from"./chunks/framework.Bksy39di.js";const T=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"zh-Hant/ktor/client-auth.md","filePath":"zh-Hant/ktor/client-auth.md","lastUpdated":1755457140000}'),b={name:"zh-Hant/ktor/client-auth.md"};function m(f,i,F,v,A,C){const o=a("TopicTitle"),r=a("show-structure"),k=a("primary-label"),d=a("tldr"),c=a("link-summary"),l=a("code-block"),p=a("TabItem"),u=a("Tabs"),g=a("Links");return _(),y("div",null,[s(o,{labelRef:"client-plugin",title:"Ktor 用戶端中的認證與授權"}),s(r,{for:"chapter",depth:"2"}),s(k,{ref:"client-plugin"},null,512),s(d,null,{default:t(()=>i[0]||(i[0]=[e("p",null,[e("b",null,"必要依賴項"),n("："),e("code",null,"io.ktor:ktor-client-auth")],-1)])),_:1}),s(c,null,{default:t(()=>i[1]||(i[1]=[n(" Auth 外掛程式處理您用戶端應用程式中的認證與授權。 ")])),_:1}),i[5]||(i[5]=h('<p>Ktor 提供 <a href="https://api.ktor.io/ktor-client/ktor-client-plugins/ktor-client-auth/io.ktor.client.plugins.auth/-auth" target="_blank" rel="noreferrer">Auth</a> 外掛程式，用於處理您用戶端應用程式中的認證與授權。典型使用情境包括使用者登入及取得特定資源的存取權。</p><blockquote><p>在伺服器端，Ktor 提供 <a href="./server-auth">Authentication</a> 外掛程式來處理認證與授權。</p></blockquote><h2 id="supported" tabindex="-1">支援的認證類型 <a class="header-anchor" href="#supported" aria-label="Permalink to &quot;支援的認證類型 {id=&quot;supported&quot;}&quot;">​</a></h2><p>HTTP 提供一個 <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Authentication" target="_blank" rel="noreferrer">通用框架</a> 用於存取控制和認證。Ktor 用戶端允許您使用以下 HTTP 認證方案：</p><ul><li><a href="./client-basic-auth">基本</a> - 使用 <code>Base64</code> 編碼提供使用者名稱和密碼。如果未與 HTTPS 結合使用，通常不建議使用。</li><li><a href="./client-digest-auth">摘要</a> - 一種認證方法，透過將雜湊函數應用於使用者名稱和密碼，以加密形式傳輸使用者憑證。</li><li><a href="./client-bearer-auth">承載者</a> - 一種認證方案，涉及稱為承載者令牌的安全令牌。例如，您可以將此方案作為 OAuth 流程的一部分，透過使用外部提供者（如 Google、Facebook、Twitter 等）來授權您的應用程式使用者。</li></ul><h2 id="add_dependencies" tabindex="-1">添加依賴項 <a class="header-anchor" href="#add_dependencies" aria-label="Permalink to &quot;添加依賴項 {id=&quot;add_dependencies&quot;}&quot;">​</a></h2><p>若要啟用認證，您需要在建構腳本中包含 <code>ktor-client-auth</code> 構件：</p>',7)),s(u,{group:"languages"},{default:t(()=>[s(p,{title:"Gradle (Kotlin)","group-key":"kotlin"},{default:t(()=>[s(l,{lang:"Kotlin",code:'            implementation("io.ktor:ktor-client-auth:$ktor_version")'})]),_:1}),s(p,{title:"Gradle (Groovy)","group-key":"groovy"},{default:t(()=>[s(l,{lang:"Groovy",code:'            implementation "io.ktor:ktor-client-auth:$ktor_version"'})]),_:1}),s(p,{title:"Maven","group-key":"maven"},{default:t(()=>[s(l,{lang:"XML",code:`            <dependency>
                <groupId>io.ktor</groupId>
                <artifactId>ktor-client-auth-jvm</artifactId>
                <version>\${ktor_version}</version>
            </dependency>`})]),_:1})]),_:1}),e("p",null,[i[3]||(i[3]=n(" 您可以從 ")),s(g,{href:"/ktor/client-dependencies",summary:"瞭解如何將用戶端依賴項添加到現有專案。"},{default:t(()=>i[2]||(i[2]=[n("添加用戶端依賴項")])),_:1}),i[4]||(i[4]=n(" 瞭解更多關於 Ktor 用戶端所需的構件資訊。 "))]),i[6]||(i[6]=h(`<h2 id="install_plugin" tabindex="-1">安裝 Auth <a class="header-anchor" href="#install_plugin" aria-label="Permalink to &quot;安裝 Auth {id=&quot;install_plugin&quot;}&quot;">​</a></h2><p>若要安裝 <code>Auth</code> 外掛程式，請將其傳遞給 <a href="./client-create-and-configure#configure-client">用戶端配置區塊</a> 內的 <code>install</code> 函數：</p><div class="language-kotlin vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> io.ktor.client.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">*</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> io.ktor.client.engine.cio.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">*</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> io.ktor.client.plugins.auth.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">*</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//...</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">val</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> client </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> HttpClient</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(CIO) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    install</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Auth) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 配置認證</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>現在您可以<a href="#configure_authentication">配置</a> 所需的認證提供者。</p><h2 id="configure_authentication" tabindex="-1">配置認證 <a class="header-anchor" href="#configure_authentication" aria-label="Permalink to &quot;配置認證 {id=&quot;configure_authentication&quot;}&quot;">​</a></h2><h3 id="choose-provider" tabindex="-1">步驟 1：選擇認證提供者 <a class="header-anchor" href="#choose-provider" aria-label="Permalink to &quot;步驟 1：選擇認證提供者 {id=&quot;choose-provider&quot;}&quot;">​</a></h3><p>若要使用特定的認證提供者（<a href="./client-basic-auth">基本</a>、<a href="./client-digest-auth">摘要</a> 或 <a href="./client-bearer-auth">承載者</a>），您需要在 <code>install</code> 區塊內呼叫對應的函數。例如，若要使用 <code>basic</code> 認證，請呼叫 <a href="https://api.ktor.io/ktor-client/ktor-client-plugins/ktor-client-auth/io.ktor.client.plugins.auth.providers/basic.html" target="_blank" rel="noreferrer">basic</a> 函數：</p><div class="language-kotlin vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">install</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Auth) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    basic</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 配置基本認證</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>在區塊內部，您可以配置此提供者特有的設定。</p><h3 id="realm" tabindex="-1">步驟 2：（可選）配置領域 <a class="header-anchor" href="#realm" aria-label="Permalink to &quot;步驟 2：（可選）配置領域 {id=&quot;realm&quot;}&quot;">​</a></h3><p>您可以選擇使用 <code>realm</code> 屬性配置領域：</p><div class="language-kotlin vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">install</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Auth) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    basic</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        realm </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Access to the &#39;/&#39; path&quot;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // ...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>您可以建立幾個具有不同領域的提供者，以存取不同的資源：</p><div class="language-kotlin vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">install</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Auth) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    basic</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        realm </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Access to the &#39;/&#39; path&quot;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // ...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    basic</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        realm </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Access to the &#39;/admin&#39; path&quot;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // ...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>在此情況下，用戶端會根據包含領域的 <code>WWW-Authenticate</code> 回應標頭來選擇必要的提供者。</p><h3 id="configure-provider" tabindex="-1">步驟 3：配置提供者 <a class="header-anchor" href="#configure-provider" aria-label="Permalink to &quot;步驟 3：配置提供者 {id=&quot;configure-provider&quot;}&quot;">​</a></h3><p>若要瞭解如何為特定的<a href="#supported">提供者</a> 配置設定，請參閱對應的主題：</p><ul><li><a href="./client-basic-auth">Ktor 用戶端中的基本認證</a></li><li><a href="./client-digest-auth">Ktor 用戶端中的摘要認證</a></li><li><a href="./client-bearer-auth">Ktor 用戶端中的承載者認證</a></li></ul>`,18))])}const D=E(b,[["render",m]]);export{T as __pageData,D as default};
