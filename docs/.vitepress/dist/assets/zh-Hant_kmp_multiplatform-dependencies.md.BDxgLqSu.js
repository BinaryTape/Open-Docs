import{_ as h}from"./chunks/icon-1-done.B5D6C9SU.js";import{_ as k}from"./chunks/icon-2-done.e1N9yMQF.js";import{_ as o}from"./chunks/icon-3.DqpDG4W7.js";import{_ as d}from"./chunks/icon-4-todo.DqbNYzPe.js";import{_ as E}from"./chunks/icon-5-todo.DJgVODZv.js";import{_ as g}from"./chunks/gradle-sync.fCQp85Nh.js";import{_ as u}from"./chunks/first-multiplatform-project-3.DSsneMHX.js";import{_ as m,C as l,c as y,o as F,j as s,G as t,ag as c,a,w as n}from"./chunks/framework.Bksy39di.js";const M=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"zh-Hant/kmp/multiplatform-dependencies.md","filePath":"zh-Hant/kmp/multiplatform-dependencies.md","lastUpdated":1755516278000}'),f={name:"zh-Hant/kmp/multiplatform-dependencies.md"};function C(b,i,B,A,D,v){const e=l("secondary-label"),p=l("Links"),r=l("tldr");return F(),y("div",null,[i[22]||(i[22]=s("h1",{id:"將依賴項新增至您的專案",tabindex:"-1"},[a("將依賴項新增至您的專案 "),s("a",{class:"header-anchor",href:"#將依賴項新增至您的專案","aria-label":'Permalink to "將依賴項新增至您的專案"'},"​")],-1)),t(e,{ref:"IntelliJ IDEA"},null,512),t(e,{ref:"Android Studio"},null,512),t(r,null,{default:n(()=>[i[18]||(i[18]=s("p",null,"本教學使用 IntelliJ IDEA，但您也可以在 Android Studio 中遵循此教學 — 兩個 IDE 都共用相同的核心功能和 Kotlin 多平台支援。",-1)),i[19]||(i[19]=s("br",null,null,-1)),i[20]||(i[20]=s("br",null,null,-1)),i[21]||(i[21]=s("p",null,[a("這是「"),s("strong",null,"使用共享邏輯和原生 UI 建立 Kotlin 多平台應用程式"),a("」教學的第三部分。在繼續之前，請確保您已完成先前的步驟。")],-1)),s("p",null,[i[2]||(i[2]=s("img",{src:h,width:"20",alt:"First step"},null,-1)),i[3]||(i[3]=a()),t(p,{href:"/kmp/multiplatform-create-first-app",summary:"This tutorial uses IntelliJ IDEA, but you can also follow it in Android Studio – both IDEs share the same core functionality and Kotlin Multiplatform support. This is the first part of the Create a Kotlin Multiplatform app with shared logic and native UI tutorial. Create your Kotlin Multiplatform app Update the user interface Add dependencies Share more logic Wrap up your project"},{default:n(()=>i[0]||(i[0]=[a("建立您的 Kotlin 多平台應用程式")])),_:1}),i[4]||(i[4]=s("br",null,null,-1)),i[5]||(i[5]=s("img",{src:k,width:"20",alt:"Second step"},null,-1)),i[6]||(i[6]=a()),t(p,{href:"/kmp/multiplatform-update-ui",summary:"This tutorial uses IntelliJ IDEA, but you can also follow it in Android Studio – both IDEs share the same core functionality and Kotlin Multiplatform support. This is the second part of the Create a Kotlin Multiplatform app with shared logic and native UI tutorial. Before proceeding, make sure you've completed previous steps. Create your Kotlin Multiplatform app Update the user interface Add dependencies Share more logic Wrap up your project"},{default:n(()=>i[1]||(i[1]=[a("更新使用者介面")])),_:1}),i[7]||(i[7]=s("br",null,null,-1)),i[8]||(i[8]=s("img",{src:o,width:"20",alt:"Third step"},null,-1)),i[9]||(i[9]=a()),i[10]||(i[10]=s("strong",null,"新增依賴項",-1)),i[11]||(i[11]=s("br",null,null,-1)),i[12]||(i[12]=s("img",{src:d,width:"20",alt:"Fourth step"},null,-1)),i[13]||(i[13]=a(" 分享更多邏輯")),i[14]||(i[14]=s("br",null,null,-1)),i[15]||(i[15]=s("img",{src:E,width:"20",alt:"Fifth step"},null,-1)),i[16]||(i[16]=a(" 結束您的專案")),i[17]||(i[17]=s("br",null,null,-1))])]),_:1}),i[23]||(i[23]=c(`<p>您已建立了您的第一個跨平台 Kotlin 多平台專案！現在，讓我們學習如何將依賴項新增至第三方函式庫，這對於建構成功的跨平台應用程式是必要的。</p><h2 id="依賴項類型" tabindex="-1">依賴項類型 <a class="header-anchor" href="#依賴項類型" aria-label="Permalink to &quot;依賴項類型&quot;">​</a></h2><p>在 Kotlin 多平台專案中，您可以使用兩種類型的依賴項：</p><ul><li><p><em>多平台依賴項</em>。這些是支援多個目標的多平台函式庫，可以在 <code>common</code> 原始碼集 (<code>commonMain</code>) 中使用。</p><p>許多現代 Android 函式庫已經支援多平台，例如 <a href="https://insert-koin.io/" target="_blank" rel="noreferrer">Koin</a>、<a href="https://www.apollographql.com/" target="_blank" rel="noreferrer">Apollo</a> 和 <a href="https://square.github.io/okio/" target="_blank" rel="noreferrer">Okio</a>。在 <a href="https://klibs.io/" target="_blank" rel="noreferrer">klibs.io</a> 上尋找更多多平台函式庫，這是 JetBrains 用於發現 Kotlin 多平台函式庫的實驗性搜尋服務。</p></li><li><p><em>原生依賴項</em>。這些是來自相關生態系統的常規函式庫。在原生專案中，您通常使用 Android 的 Gradle 和 iOS 的 CocoaPods 或其他依賴項管理器來使用它們。</p><p>當您使用共享模組時，通常在您想要使用平台 API（例如安全儲存）時，仍然需要原生依賴項。您可以將原生依賴項新增至原生原始碼集 (<code>androidMain</code> 和 <code>iosMain</code>)。</p></li></ul><p>對於這兩種依賴項類型，您可以使用本機和外部儲存庫。</p><h2 id="新增多平台依賴項" tabindex="-1">新增多平台依賴項 <a class="header-anchor" href="#新增多平台依賴項" aria-label="Permalink to &quot;新增多平台依賴項&quot;">​</a></h2><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>如果您有開發 Android 應用程式的經驗，新增多平台依賴項與在常規 Android 專案中新增 Gradle 依賴項類似。唯一的區別是您需要指定原始碼集。</p></div><p>讓我們回到應用程式，讓問候語更具節日氣氛。除了設備資訊外，新增一個函數來顯示距離新年還有多少天。<code>kotlinx-datetime</code> 函式庫具有完整的多平台支援，是您在共享程式碼中處理日期的最便捷方式。</p><ol><li><p>開啟位於 <code>shared</code> 目錄中的 <code>build.gradle.kts</code> 檔案。</p></li><li><p>將以下依賴項和 Kotlin 時間 opt-in 新增至 <code>commonMain</code> 原始碼集依賴項：</p><div class="language-kotlin vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">kotlin</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    //... </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    sourceSets</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        languageSettings.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">optIn</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;kotlin.time.ExperimentalTime&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        commonMain.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">dependencies</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">            implementation</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;org.jetbrains.kotlinx:kotlinx-datetime:0.7.1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        } </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div></li><li><p>按一下「<strong>同步 Gradle 變更</strong>」按鈕以同步 Gradle 檔案：<img src="`+g+`" alt="同步 Gradle 檔案" width="50"></p></li><li><p>在 <code>shared/src/commonMain/kotlin</code> 中，在您的 <code>Greeting.kt</code> 檔案所在的專案目錄中建立一個新檔案 <code>NewYear.kt</code>。</p></li><li><p>使用一個簡短的函數更新檔案，該函數使用日期時間（<code>date-time</code>）日期算術計算從今天到新年的天數：</p></li></ol><div class="language-kotlin vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> kotlinx.datetime.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">*</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> kotlin.time.Clock</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">fun</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> daysUntilNewYear</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(): </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    val</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> today </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Clock.System.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">todayIn</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(TimeZone.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">currentSystemDefault</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    val</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> closestNewYear </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> LocalDate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(today.year </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> today.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">daysUntil</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(closestNewYear)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">fun</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> daysPhrase</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(): </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">String</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;There are only \${</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">daysUntilNewYear</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">()} days left until New Year! 🎆&quot;</span></span></code></pre></div><ol start="6"><li><p>在 <code>Greeting.kt</code> 中，更新 <code>Greeting</code> 類別以查看結果：</p><div class="language-kotlin vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Greeting</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> val</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> platform: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Platform</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> getPlatform</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    fun</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> greet</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(): </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">List</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> buildList</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (Random.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">nextBoolean</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()) </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Hi!&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> else</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Hello!&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Guess what this is! &gt; \${platform.name.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">reversed</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">()}!&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">daysPhrase</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div></li><li><p>要查看結果，請從 IntelliJ IDEA 重新執行您的 <code>composeApp</code> 和 <code>iosApp</code> 配置：</p></li></ol><p><img src="`+u+'" alt="Updated mobile multiplatform app with external dependencies" width="500"></p><h2 id="下一步" tabindex="-1">下一步 <a class="header-anchor" href="#下一步" aria-label="Permalink to &quot;下一步&quot;">​</a></h2><p>在本教學的下一部分，您將為專案新增更多依賴項和更複雜的邏輯。</p><p><strong><a href="./multiplatform-upgrade-app">繼續到下一部分</a></strong></p><h3 id="另請參閱" tabindex="-1">另請參閱 <a class="header-anchor" href="#另請參閱" aria-label="Permalink to &quot;另請參閱&quot;">​</a></h3><ul><li>了解如何使用各種多平台依賴項：<a href="./multiplatform-add-dependencies">Kotlin 函式庫、Kotlin 多平台函式庫和其他多平台專案</a>。</li><li>了解如何<a href="./multiplatform-android-dependencies">新增 Android 依賴項</a>以及<a href="./multiplatform-ios-dependencies">使用或不使用 CocoaPods 的 iOS 依賴項</a>，以便在平台特定的原始碼集中使用。</li><li>查看<a href="./multiplatform-samples">如何在範例專案中使用 Android 和 iOS 函式庫</a>的範例。</li></ul><h2 id="取得協助" tabindex="-1">取得協助 <a class="header-anchor" href="#取得協助" aria-label="Permalink to &quot;取得協助&quot;">​</a></h2><ul><li><strong>Kotlin Slack</strong>。取得<a href="https://surveys.jetbrains.com/s3/kotlin-slack-sign-up" target="_blank" rel="noreferrer">邀請</a>並加入 <a href="https://kotlinlang.slack.com/archives/C3PQML5NU" target="_blank" rel="noreferrer">#multiplatform</a> 頻道。</li><li><strong>Kotlin 問題追蹤器</strong>。<a href="https://youtrack.jetbrains.com/newIssue?project=KT" target="_blank" rel="noreferrer">報告新問題</a>。</li></ul>',19))])}const N=m(f,[["render",C]]);export{M as __pageData,N as default};
