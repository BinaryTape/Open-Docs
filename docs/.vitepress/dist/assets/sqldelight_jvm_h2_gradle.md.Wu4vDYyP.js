import{_ as a,c as i,o as e,ag as t}from"./chunks/framework.Bksy39di.js";const k=JSON.parse('{"title":"Gradle","description":"","frontmatter":{},"headers":[],"relativePath":"sqldelight/jvm_h2/gradle.md","filePath":"sqldelight/jvm_h2/gradle.md","lastUpdated":1748435462000}'),l={name:"sqldelight/jvm_h2/gradle.md"};function n(p,s,d,h,o,r){return e(),i("div",null,s[0]||(s[0]=[t(`<h1 id="gradle" tabindex="-1">Gradle <a class="header-anchor" href="#gradle" aria-label="Permalink to &quot;Gradle&quot;">​</a></h1><p>为了实现进一步定制，你可以使用 Gradle DSL 显式声明数据库。</p><h2 id="sqldelight-配置" tabindex="-1">SQLDelight 配置 <a class="header-anchor" href="#sqldelight-配置" aria-label="Permalink to &quot;SQLDelight 配置&quot;">​</a></h2><h3 id="databases" tabindex="-1"><code>databases</code> <a class="header-anchor" href="#databases" aria-label="Permalink to &quot;\`databases\`&quot;">​</a></h3><p>数据库容器。配置 SQLDelight 以给定名称创建每个数据库。</p><div class="vp-code-group vp-adaptive-theme"><div class="tabs"><input type="radio" name="group-LuTLb" id="tab-cGDT4Zh" checked><label data-title="Kotlin" for="tab-cGDT4Zh">Kotlin</label><input type="radio" name="group-LuTLb" id="tab-rwBDD1p"><label data-title="Groovy" for="tab-rwBDD1p">Groovy</label></div><div class="blocks"><div class="language-kotlin vp-adaptive-theme active"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sqldelight</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  databases</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    create</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;MyDatabase&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // Database configuration here.</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><div class="language-groovy vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">groovy</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sqldelight {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  databases {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    MyDatabase</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // Database configuration here.</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div></div></div><hr><h3 id="linksqlite" tabindex="-1"><code>linkSqlite</code> <a class="header-anchor" href="#linksqlite" aria-label="Permalink to &quot;\`linkSqlite\`&quot;">​</a></h3><p>类型: <code>Property&lt;Boolean&gt;</code></p><p>针对原生目标。是否应自动链接 sqlite。 这会在项目编译为动态框架（KMP 近期版本的默认行为）时，添加链接 sqlite 所需的元数据。</p><p>请注意，对于静态框架，此标志无效。 导入项目的 XCode 构建应将 <code>-lsqlite3</code> 添加到链接器标志中。 或者，通过 cocoapods 插件在 <a href="https://cocoapods.org/pods/sqlite3" target="_blank" rel="noreferrer">sqlite3</a> pod 上<a href="https://kotlinlang.org/docs/native-cocoapods-libraries.html" target="_blank" rel="noreferrer">添加项目依赖</a>。 另一种可能有效的方法是将 <code>sqlite3</code> 添加到 cocoapods 的 <a href="https://guides.cocoapods.org/syntax/podspec.html#libraries" target="_blank" rel="noreferrer"><code>spec.libraries</code> 设置</a>中，例如在 Gradle Kotlin DSL 中：<code>extraSpecAttributes[&quot;libraries&quot;] = &quot;&#39;c++&#39;, &#39;sqlite3&#39;&quot;.</code></p><p>默认为 <code>true</code>。</p><div class="vp-code-group vp-adaptive-theme"><div class="tabs"><input type="radio" name="group-A-D2L" id="tab-7xE9D4h" checked><label data-title="Kotlin" for="tab-7xE9D4h">Kotlin</label><input type="radio" name="group-A-D2L" id="tab-o8P6qqd"><label data-title="Groovy" for="tab-o8P6qqd">Groovy</label></div><div class="blocks"><div class="language-kotlin vp-adaptive-theme active"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">linkSqlite.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">set</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><div class="language-groovy vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">groovy</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">linkSqlite </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span></span></code></pre></div></div></div><h2 id="数据库配置" tabindex="-1">数据库配置 <a class="header-anchor" href="#数据库配置" aria-label="Permalink to &quot;数据库配置&quot;">​</a></h2><h3 id="packagename" tabindex="-1"><code>packageName</code> <a class="header-anchor" href="#packagename" aria-label="Permalink to &quot;\`packageName\`&quot;">​</a></h3><p>类型: <code>Property&lt;String&gt;</code></p><p>用于数据库类的包名。</p><div class="vp-code-group vp-adaptive-theme"><div class="tabs"><input type="radio" name="group-UIxdl" id="tab-scWGlCn" checked><label data-title="Kotlin" for="tab-scWGlCn">Kotlin</label><input type="radio" name="group-UIxdl" id="tab-NcgMMCv"><label data-title="Groovy" for="tab-NcgMMCv">Groovy</label></div><div class="blocks"><div class="language-kotlin vp-adaptive-theme active"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">packageName.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">set</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;com.example.db&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><div class="language-groovy vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">groovy</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">packageName </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;com.example.db&quot;</span></span></code></pre></div></div></div><hr><h3 id="srcdirs" tabindex="-1"><code>srcDirs</code> <a class="header-anchor" href="#srcdirs" aria-label="Permalink to &quot;\`srcDirs\`&quot;">​</a></h3><p>类型: <code>ConfigurableFileCollection</code></p><p>插件将查找 <code>.sq</code> 和 <code>.sqm</code> 文件的文件夹集合。</p><p>默认为 <code>src/[prefix]main/sqldelight</code>，其中前缀取决于所应用的 Kotlin 插件，例如多平台的 <code>common</code>。</p><div class="vp-code-group vp-adaptive-theme"><div class="tabs"><input type="radio" name="group-ZKaF3" id="tab-TpTtlnP" checked><label data-title="Kotlin" for="tab-TpTtlnP">Kotlin</label><input type="radio" name="group-ZKaF3" id="tab-jQLGlWQ"><label data-title="Groovy" for="tab-jQLGlWQ">Groovy</label></div><div class="blocks"><div class="language-kotlin vp-adaptive-theme active"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">srcDirs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setFrom</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;src/main/sqldelight&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><div class="language-groovy vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">groovy</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">srcDirs </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;src/main/sqldelight&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span></code></pre></div></div></div><h4 id="srcdirs-vararg-objects-any" tabindex="-1"><code>srcDirs(vararg objects: Any)</code> <a class="header-anchor" href="#srcdirs-vararg-objects-any" aria-label="Permalink to &quot;\`srcDirs(vararg objects: Any)\`&quot;">​</a></h4><p>插件将查找 <code>.sq</code> 和 <code>.sqm</code> 文件的对象集合。</p><div class="vp-code-group vp-adaptive-theme"><div class="tabs"><input type="radio" name="group-dC5Nz" id="tab-pjbdulB" checked><label data-title="Kotlin" for="tab-pjbdulB">Kotlin</label><input type="radio" name="group-dC5Nz" id="tab-oGT1TEk"><label data-title="Groovy" for="tab-oGT1TEk">Groovy</label></div><div class="blocks"><div class="language-kotlin vp-adaptive-theme active"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">srcDirs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;src/main/sqldelight&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;main/sqldelight&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><div class="language-groovy vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">groovy</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">srcDirs(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;src/main/sqldelight&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;main/sqldelight&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div></div></div><hr><h3 id="schemaoutputdirectory" tabindex="-1"><code>schemaOutputDirectory</code> <a class="header-anchor" href="#schemaoutputdirectory" aria-label="Permalink to &quot;\`schemaOutputDirectory\`&quot;">​</a></h3><p>类型: <code>DirectoryProperty</code></p><p>应存储 <code>.db</code> 模式文件的目录，相对于项目根目录。这些文件用于验证迁移是否能生成最新模式的数据库。</p><p>默认为 <code>null</code>。 如果为 <code>null</code>，将不会创建迁移验证任务。</p><div class="vp-code-group vp-adaptive-theme"><div class="tabs"><input type="radio" name="group-6g6LB" id="tab-FMB2QJa" checked><label data-title="Kotlin" for="tab-FMB2QJa">Kotlin</label><input type="radio" name="group-6g6LB" id="tab-xEULbG-"><label data-title="Groovy" for="tab-xEULbG-">Groovy</label></div><div class="blocks"><div class="language-kotlin vp-adaptive-theme active"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">schemaOutputDirectory.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">set</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">file</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;src/main/sqldelight/databases&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))</span></span></code></pre></div><div class="language-groovy vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">groovy</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">schemaOutputDirectory </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> file(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;src/main/sqldelight/databases&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div></div></div><hr><h3 id="dependency" tabindex="-1"><code>dependency</code> <a class="header-anchor" href="#dependency" aria-label="Permalink to &quot;\`dependency\`&quot;">​</a></h3><p>类型: <code>Project</code></p><p>可选地指定对其他 Gradle 项目的模式依赖 (<a href="#schema-dependencies">见下文</a>)。</p><div class="vp-code-group vp-adaptive-theme"><div class="tabs"><input type="radio" name="group-YEtDW" id="tab-N3E7BUr" checked><label data-title="Kotlin" for="tab-N3E7BUr">Kotlin</label><input type="radio" name="group-YEtDW" id="tab-QUAitFK"><label data-title="Groovy" for="tab-QUAitFK">Groovy</label></div><div class="blocks"><div class="language-kotlin vp-adaptive-theme active"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">project</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;:other-project&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))</span></span></code></pre></div><div class="language-groovy vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">groovy</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">dependency project(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;:other-project&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div></div></div><hr><h3 id="dialect" tabindex="-1"><code>dialect</code> <a class="header-anchor" href="#dialect" aria-label="Permalink to &quot;\`dialect\`&quot;">​</a></h3><p>类型: <code>String</code> 或 <code>Provider&lt;MinimalExternalModuleDependency&gt;</code></p><p>你希望目标 SQL 变体。变体是使用 Gradle 依赖选择的。这些依赖可以指定为 <code>app.cash.sqldelight:{dialect module}:2.1.0</code>。可用变体见下文。</p><p>对于 Android 项目，SQLite 版本会根据你的 <code>minSdk</code> 自动选择。否则默认为 SQLite 3.18。</p><p>可用变体：</p><ul><li>HSQL: <code>hsql-dialect</code></li><li>MySQL: <code>mysql-dialect</code></li><li>PostgreSQL: <code>postgresql-dialect</code></li><li>SQLite 3.18: <code>sqlite-3-18-dialect</code></li><li>SQLite 3.24: <code>sqlite-3-24-dialect</code></li><li>SQLite 3.25: <code>sqlite-3-25-dialect</code></li><li>SQLite 3.30: <code>sqlite-3-30-dialect</code></li><li>SQLite 3.33: <code>sqlite-3-33-dialect</code></li><li>SQLite 3.35: <code>sqlite-3-35-dialect</code></li><li>SQLite 3.38: <code>sqlite-3-38-dialect</code></li></ul><div class="vp-code-group vp-adaptive-theme"><div class="tabs"><input type="radio" name="group-FzkaM" id="tab-kSokHy5" checked><label data-title="Kotlin" for="tab-kSokHy5">Kotlin</label><input type="radio" name="group-FzkaM" id="tab-UgxdTad"><label data-title="Groovy" for="tab-UgxdTad">Groovy</label></div><div class="blocks"><div class="language-kotlin vp-adaptive-theme active"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">dialect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;app.cash.sqldelight:sqlite-3-24-dialect:2.1.0&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><div class="language-groovy vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">groovy</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">dialect </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;app.cash.sqldelight:sqlite-3-24-dialect:2.1.0&#39;</span></span></code></pre></div></div></div><hr><h3 id="verifymigrations" tabindex="-1"><code>verifyMigrations</code> <a class="header-anchor" href="#verifymigrations" aria-label="Permalink to &quot;\`verifyMigrations\`&quot;">​</a></h3><p>类型: <code>Property&lt;Boolean&gt;</code></p><p>如果设置为 <code>true</code>，迁移文件若存在任何错误，将在构建过程中导致构建失败。</p><p>默认为 <code>false</code>。</p><div class="vp-code-group vp-adaptive-theme"><div class="tabs"><input type="radio" name="group-Ajy1S" id="tab-6T9BznU" checked><label data-title="Kotlin" for="tab-6T9BznU">Kotlin</label><input type="radio" name="group-Ajy1S" id="tab-iiYtuwJ"><label data-title="Groovy" for="tab-iiYtuwJ">Groovy</label></div><div class="blocks"><div class="language-kotlin vp-adaptive-theme active"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">verifyMigrations.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">set</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><div class="language-groovy vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">groovy</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">verifyMigrations </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span></span></code></pre></div></div></div><hr><h3 id="treatnullasunknownforequality" tabindex="-1"><code>treatNullAsUnknownForEquality</code> <a class="header-anchor" href="#treatnullasunknownforequality" aria-label="Permalink to &quot;\`treatNullAsUnknownForEquality\`&quot;">​</a></h3><p>类型: <code>Property&lt;Boolean&gt;</code></p><p>如果设置为 <code>true</code>，SQLDelight 在使用 <code>IS</code> 时，不会替换与可空类型值的相等比较。</p><p>默认为 <code>false</code>。</p><div class="vp-code-group vp-adaptive-theme"><div class="tabs"><input type="radio" name="group-l3Hux" id="tab-JYuUVFY" checked><label data-title="Kotlin" for="tab-JYuUVFY">Kotlin</label><input type="radio" name="group-l3Hux" id="tab-uQcV-a3"><label data-title="Groovy" for="tab-uQcV-a3">Groovy</label></div><div class="blocks"><div class="language-kotlin vp-adaptive-theme active"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">treatNullAsUnknownForEquality.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">set</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><div class="language-groovy vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">groovy</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">treatNullAsUnknownForEquality </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span></span></code></pre></div></div></div><hr><h3 id="generateasync" tabindex="-1"><code>generateAsync</code> <a class="header-anchor" href="#generateasync" aria-label="Permalink to &quot;\`generateAsync\`&quot;">​</a></h3><p>类型: <code>Property&lt;Boolean&gt;</code></p><p>如果设置为 <code>true</code>，SQLDelight 将生成用于异步驱动的挂起查询方法。</p><p>默认为 <code>false</code>。</p><div class="vp-code-group vp-adaptive-theme"><div class="tabs"><input type="radio" name="group-bB1lU" id="tab-ns7Bgho" checked><label data-title="Kotlin" for="tab-ns7Bgho">Kotlin</label><input type="radio" name="group-bB1lU" id="tab-op-8b8G"><label data-title="Groovy" for="tab-op-8b8G">Groovy</label></div><div class="blocks"><div class="language-kotlin vp-adaptive-theme active"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">generateAsync.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">set</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><div class="language-groovy vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">groovy</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">generateAsync </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span></span></code></pre></div></div></div><hr><h3 id="deriveschemafrommigrations" tabindex="-1"><code>deriveSchemaFromMigrations</code> <a class="header-anchor" href="#deriveschemafrommigrations" aria-label="Permalink to &quot;\`deriveSchemaFromMigrations\`&quot;">​</a></h3><p>类型: <code>Property&lt;Boolean&gt;</code></p><p>如果设置为 <code>true</code>，你的数据库模式将从 <code>.sqm</code> 文件中派生，就如同每个迁移都已应用一样。如果为 <code>false</code>，你的模式在 <code>.sq</code> 文件中定义。</p><p>默认为 <code>false</code>。</p><div class="vp-code-group vp-adaptive-theme"><div class="tabs"><input type="radio" name="group-CwsMO" id="tab-hXWuxCW" checked><label data-title="Kotlin" for="tab-hXWuxCW">Kotlin</label><input type="radio" name="group-CwsMO" id="tab-Tsw8wfD"><label data-title="Groovy" for="tab-Tsw8wfD">Groovy</label></div><div class="blocks"><div class="language-kotlin vp-adaptive-theme active"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">deriveSchemaFromMigrations.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">set</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><div class="language-groovy vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">groovy</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">deriveSchemaFromMigrations </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span></span></code></pre></div></div></div><h2 id="模式依赖" tabindex="-1">模式依赖 <a class="header-anchor" href="#模式依赖" aria-label="Permalink to &quot;模式依赖&quot;">​</a></h2><p>你可以指定对另一个模块的模式依赖：</p><div class="vp-code-group vp-adaptive-theme"><div class="tabs"><input type="radio" name="group-O-Hg6" id="tab-3za1BgL" checked><label data-title="Kotlin" for="tab-3za1BgL">Kotlin</label><input type="radio" name="group-O-Hg6" id="tab-TYxfLUg"><label data-title="Groovy" for="tab-TYxfLUg">Groovy</label></div><div class="blocks"><div class="language-kotlin vp-adaptive-theme active"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// project-a/build.gradle.kts</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sqldelight</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  databases</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    create</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;MyDatabase&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      packageName.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">set</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;com.example.projecta&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">project</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;:ProjectB&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><div class="language-groovy vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">groovy</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// project-a/build.gradle</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sqldelight {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  databases {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    MyDatabase</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      packageName </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;com.example.projecta&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      dependency project(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;:ProjectB&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div></div></div><p>这会在 <code>ProjectB</code> 中查找 <code>MyDatabase</code> 并在编译时包含其模式。为了使其正常工作，<code>ProjectB</code> 必须有一个相同名称的数据库（本例中为 <code>MyDatabase</code>），但生成到不同的包中，所以 <code>ProjectB</code> 的 Gradle 配置可能如下所示：</p><div class="vp-code-group vp-adaptive-theme"><div class="tabs"><input type="radio" name="group-wkflT" id="tab-z_zPuPw" checked><label data-title="Kotlin" for="tab-z_zPuPw">Kotlin</label><input type="radio" name="group-wkflT" id="tab-xaK0gMd"><label data-title="Groovy" for="tab-xaK0gMd">Groovy</label></div><div class="blocks"><div class="language-kotlin vp-adaptive-theme active"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// project-b/build.gradle.kts</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sqldelight</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  databases</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // Same database name</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    create</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;MyDatabase&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      package</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> = &quot;com.example.projectb&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><div class="language-groovy vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">groovy</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// project-b/build.gradle</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sqldelight {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  databases {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // Same database name</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    MyDatabase</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      package </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;com.example.projectb&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div></div></div><p>如果你使用 <code>deriveSchemaFromMigrations = true</code>，那么依赖此模块的每个模块也必须启用此特性。</p>`,76)]))}const g=a(l,[["render",n]]);export{k as __pageData,g as default};
