import{_ as F,C as n,c as C,o as A,G as t,ag as r,j as s,w as l,a as i}from"./chunks/framework.Bksy39di.js";const x=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"ktor/server-resources.md","filePath":"ktor/server-resources.md","lastUpdated":1755457140000}'),B={name:"ktor/server-resources.md"};function m(v,a,b,f,D,_){const d=n("TopicTitle"),E=n("show-structure"),o=n("primary-label"),k=n("Links"),g=n("tldr"),c=n("link-summary"),e=n("code-block"),h=n("TabItem"),p=n("Tabs"),y=n("list"),u=n("snippet");return A(),C("div",null,[t(d,{labelRef:"server-plugin",title:"类型安全的路由"}),t(E,{for:"chapter",depth:"2"}),t(o,{ref:"server-plugin"},null,512),t(g,null,{default:l(()=>[a[3]||(a[3]=s("p",null,[s("b",null,"所需依赖项"),i(": "),s("code",null,"io.ktor:ktor-server-resources")],-1)),a[4]||(a[4]=s("p",null,[s("b",null,"代码示例"),i(": "),s("a",{href:"https://github.com/ktorio/ktor-documentation/tree/3.2.3/codeSnippets/snippets/resource-routing"}," resource-routing ")],-1)),s("p",null,[s("b",null,[t(k,{href:"/ktor/server-native",summary:"Ktor 支持 Kotlin/Native，并允许您无需额外的运行时或虚拟机即可运行服务器。"},{default:l(()=>a[0]||(a[0]=[i("原生服务器")])),_:1}),a[1]||(a[1]=i("支持"))]),a[2]||(a[2]=i(": ✅ "))])]),_:1}),t(c,null,{default:l(()=>a[5]||(a[5]=[i("Resources 插件允许您实现类型安全的路由。")])),_:1}),a[19]||(a[19]=r("",7)),t(p,{group:"languages"},{default:l(()=>[t(h,{title:"Gradle (Kotlin)","group-key":"kotlin"},{default:l(()=>[t(e,{lang:"Kotlin",code:'            implementation("io.ktor:ktor-server-resources:$ktor_version")'})]),_:1}),t(h,{title:"Gradle (Groovy)","group-key":"groovy"},{default:l(()=>[t(e,{lang:"Groovy",code:'            implementation "io.ktor:ktor-server-resources:$ktor_version"'})]),_:1}),t(h,{title:"Maven","group-key":"maven"},{default:l(()=>[t(e,{lang:"XML",code:`            <dependency>
                <groupId>io.ktor</groupId>
                <artifactId>ktor-server-resources-jvm</artifactId>
                <version>\${ktor_version}</version>
            </dependency>`})]),_:1})]),_:1}),a[20]||(a[20]=s("h2",{id:"install_plugin",tabindex:"-1"},[i("安装 Resources "),s("a",{class:"header-anchor",href:"#install_plugin","aria-label":'Permalink to "安装 Resources {id="install_plugin"}"'},"​")],-1)),s("p",null,[a[7]||(a[7]=i(" 要在应用程序中")),a[8]||(a[8]=s("a",{href:"#install"},"安装",-1)),a[9]||(a[9]=i()),a[10]||(a[10]=s("code",null,"Resources",-1)),a[11]||(a[11]=i(" 插件， 请将其传递给指定")),t(k,{href:"/ktor/server-modules",summary:"模块允许您通过对路由进行分组来组织您的应用程序。"},{default:l(()=>a[6]||(a[6]=[i("模块")])),_:1}),a[12]||(a[12]=i("中的 ")),a[13]||(a[13]=s("code",null,"install",-1)),a[14]||(a[14]=i(" 函数。 以下代码片段展示了如何安装 ")),a[15]||(a[15]=s("code",null,"Resources",-1)),a[16]||(a[16]=i(" ... "))]),t(y,null,{default:l(()=>a[17]||(a[17]=[s("li",null,[i(" ... 在 "),s("code",null,"embeddedServer"),i(" 函数调用内部。 ")],-1),s("li",null,[i(" ... 在显式定义的 "),s("code",null,"module"),i(" (它是 "),s("code",null,"Application"),i(" 类的扩展函数) 内部。 ")],-1)])),_:1}),t(p,null,{default:l(()=>[t(h,{title:"embeddedServer"},{default:l(()=>[t(e,{lang:"kotlin",code:`            import io.ktor.server.engine.*
            import io.ktor.server.netty.*
            import io.ktor.server.application.*
            import io.ktor.server.resources.*

            fun main() {
                embeddedServer(Netty, port = 8080) {
                    install(Resources)
                    // ...
                }.start(wait = true)
            }`})]),_:1}),t(h,{title:"module"},{default:l(()=>[t(e,{lang:"kotlin",code:`            import io.ktor.server.application.*
            import io.ktor.server.resources.*
            // ...
            fun Application.module() {
                install(Resources)
                // ...
            }`})]),_:1})]),_:1}),a[21]||(a[21]=s("h2",{id:"resource_classes",tabindex:"-1"},[i("创建资源类 "),s("a",{class:"header-anchor",href:"#resource_classes","aria-label":'Permalink to "创建资源类 {id="resource_classes"}"'},"​")],-1)),t(u,{id:"resource_classes_server"},{default:l(()=>a[18]||(a[18]=[s("p",null,[i("每个资源类都应具有 "),s("code",null,"@Resource"),i(" 注解。 下面，我们将介绍资源类的几个示例——定义单个路径段、查询和路径形参等。")],-1),s("h3",{id:"resource_url",tabindex:"-1"},[i("资源 URL "),s("a",{class:"header-anchor",href:"#resource_url","aria-label":'Permalink to "资源 URL {id="resource_url"}"'},"​")],-1),s("p",null,[i("以下示例展示了如何定义 "),s("code",null,"Articles"),i(" 类，该类指定了响应 "),s("code",null,"/articles"),i(" 路径的资源。")],-1),s("div",{class:"language-kotlin vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"kotlin"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code",tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"import"),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," io.ktor.resources."),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"*")]),i(`
`),s("span",{class:"line"}),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"@Resource"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"/articles"'),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"class"),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," Articles"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"()")])])])],-1),s("h3",{id:"resource_query_param",tabindex:"-1"},[i("带查询形参的资源 "),s("a",{class:"header-anchor",href:"#resource_query_param","aria-label":'Permalink to "带查询形参的资源 {id="resource_query_param"}"'},"​")],-1),s("p",null,[i("下面的 "),s("code",null,"Articles"),i(" 类具有 "),s("code",null,"sort"),i(" 字符串属性，该属性充当"),s("a",{href:"./server-requests#query_parameters"},"查询形参"),i("并允许您定义一个响应以下路径且带 "),s("code",null,"sort"),i(" 查询形参的资源："),s("code",null,"/articles?sort=new"),i("。")],-1),s("div",{class:"language-kotlin vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"kotlin"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code",tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"@Resource"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"/articles"'),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"class"),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," Articles"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"val"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," sort: "),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"String"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"? "),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "new"'),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")])])])],-1),s("h3",{id:"resource_nested",tabindex:"-1"},[i("带嵌套类的资源 "),s("a",{class:"header-anchor",href:"#resource_nested","aria-label":'Permalink to "带嵌套类的资源 {id="resource_nested"}"'},"​")],-1),s("p",null,[i("您可以嵌套类来创建包含多个路径段的资源。请注意，在这种情况下，嵌套类应具有一个带有外部类类型的属性。 以下示例显示了响应 "),s("code",null,"/articles/new"),i(" 路径的资源。")],-1),s("div",{class:"language-kotlin vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"kotlin"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code",tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"@Resource"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"/articles"'),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"class"),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," Articles"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"() {")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"    @Resource"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"new"'),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    class"),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," New"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"val"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," parent: "),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Articles"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," Articles"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"())")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])])],-1),s("h3",{id:"resource_path_param",tabindex:"-1"},[i("带路径形参的资源 "),s("a",{class:"header-anchor",href:"#resource_path_param","aria-label":'Permalink to "带路径形参的资源 {id="resource_path_param"}"'},"​")],-1),s("p",null,[i("以下示例演示了如何添加"),s("a",{href:"#resource_nested"},"嵌套的"),i(),s("code",null,"{id}"),i(" 整型"),s("a",{href:"./server-routing#path_parameter"},"路径形参"),i("，该形参匹配一个路径段并将其捕获为名为 "),s("code",null,"id"),i(" 的形参。")],-1),s("div",{class:"language-kotlin vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"kotlin"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code",tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"@Resource"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"/articles"'),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"class"),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," Articles"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"() {")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"    @Resource"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"{id}"'),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    class"),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," Id"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"val"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," parent: "),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Articles"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," Articles"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(), "),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"val"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," id: "),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Long"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])])],-1),s("p",null,[i("例如，此资源可用于响应 "),s("code",null,"/articles/12"),i("。")],-1)])),_:1}),a[22]||(a[22]=r("",27))])}const R=F(B,[["render",m]]);export{x as __pageData,R as default};
