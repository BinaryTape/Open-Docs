import{_ as o,C as p,c as d,o as E,j as s,G as i,ag as h,a as n,w as t}from"./chunks/framework.Bksy39di.js";const m=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"ktor/server-css-dsl.md","filePath":"ktor/server-css-dsl.md","lastUpdated":1755457140000}'),g={name:"ktor/server-css-dsl.md"};function c(y,a,u,F,C,v){const r=p("tldr"),l=p("code-block"),e=p("TabItem"),k=p("Tabs");return E(),d("div",null,[a[4]||(a[4]=s("h1",{id:"css-dsl",tabindex:"-1"},[n("CSS DSL "),s("a",{class:"header-anchor",href:"#css-dsl","aria-label":'Permalink to "CSS DSL"'},"​")],-1)),i(r,null,{default:t(()=>a[0]||(a[0]=[s("p",null,[s("b",null,"所需依赖项"),n(": "),s("code",null,"io.ktor:ktor-server-html-builder"),n(", "),s("code",null,"org.jetbrains.kotlin-wrappers:kotlin-css")],-1),s("p",null,[s("b",null,"代码示例"),n(": "),s("a",{href:"https://github.com/ktorio/ktor-documentation/tree/3.2.3/codeSnippets/snippets/css-dsl"}," css-dsl ")],-1)])),_:1}),a[5]||(a[5]=h('<p>CSS DSL 扩展了 <a href="./server-html-dsl">HTML DSL</a>，并允许你使用 <a href="./https://github.com/JetBrains/kotlin-wrappers/blob/master/kotlin-css/README">kotlin-css</a> 包装器在 Kotlin 中编写样式表。</p><blockquote><p>关于如何将样式表作为静态内容提供服务，请参见 <a href="./server-static-content">提供静态内容</a>。</p></blockquote><h2 id="add_dependencies" tabindex="-1">添加依赖项 <a class="header-anchor" href="#add_dependencies" aria-label="Permalink to &quot;添加依赖项 {id=&quot;add_dependencies&quot;}&quot;">​</a></h2><p>CSS DSL 无需<a href="./server-plugins#install">安装</a>，但需要在构建脚本中包含以下构件：</p>',4)),s("ol",null,[s("li",null,[a[1]||(a[1]=s("p",null,[n("用于 HTML DSL 的 "),s("code",null,"ktor-server-html-builder"),n(" 构件：")],-1)),i(k,{group:"languages"},{default:t(()=>[i(e,{title:"Gradle (Kotlin)","group-key":"kotlin"},{default:t(()=>[i(l,{lang:"Kotlin",code:'               implementation("io.ktor:ktor-server-html-builder:$ktor_version")'})]),_:1}),i(e,{title:"Gradle (Groovy)","group-key":"groovy"},{default:t(()=>[i(l,{lang:"Groovy",code:'               implementation "io.ktor:ktor-server-html-builder:$ktor_version"'})]),_:1}),i(e,{title:"Maven","group-key":"maven"},{default:t(()=>[i(l,{lang:"XML",code:`               <dependency>
                   <groupId>io.ktor</groupId>
                   <artifactId>ktor-server-html-builder-jvm</artifactId>
                   <version>\${ktor_version}</version>
               </dependency>`})]),_:1})]),_:1})]),s("li",null,[a[2]||(a[2]=s("p",null,[n("用于构建 CSS 的 "),s("code",null,"kotlin-css-jvm"),n(" 构件：")],-1)),i(k,{group:"languages"},{default:t(()=>[i(e,{title:"Gradle (Kotlin)","group-key":"kotlin"},{default:t(()=>[i(l,{lang:"Kotlin",code:'               implementation("org.jetbrains.kotlin-wrappers:kotlin-css:$kotlin_css_version")'})]),_:1}),i(e,{title:"Gradle (Groovy)","group-key":"groovy"},{default:t(()=>[i(l,{lang:"Groovy",code:'               implementation "org.jetbrains.kotlin-wrappers:kotlin-css:$kotlin_css_version"'})]),_:1}),i(e,{title:"Maven","group-key":"maven"},{default:t(()=>[i(l,{lang:"XML",code:`               <dependency>
                   <groupId>org.jetbrains.kotlin-wrappers</groupId>
                   <artifactId>kotlin-css</artifactId>
                   <version>\${kotlin_css_version}</version>
               </dependency>`})]),_:1})]),_:1}),a[3]||(a[3]=s("p",null,[n("你可以将 "),s("code",null,"$kotlin_css_version"),n(" 替换为 "),s("code",null,"kotlin-css"),n(" 构件的所需版本，例如 "),s("code",null,"1.0.0-pre.625"),n("。")],-1))])]),a[6]||(a[6]=h(`<h2 id="serve_css" tabindex="-1">提供 CSS <a class="header-anchor" href="#serve_css" aria-label="Permalink to &quot;提供 CSS {id=&quot;serve_css&quot;}&quot;">​</a></h2><p>要发送 CSS 响应，你需要通过添加 <code>respondCss</code> 方法来扩展 <code>ApplicationCall</code>，以将样式表序列化为字符串并使用 <code>CSS</code> 内容类型将其发送给客户端：</p><div class="language-kotlin vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">suspend</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> inline</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> fun</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ApplicationCall</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">respondCss</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(builder: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">CssBuilder</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Unit) {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">respondText</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">CssBuilder</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">apply</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(builder).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">toString</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(), ContentType.Text.CSS)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>然后，你可以在所需的 <a href="./server-routing">路由</a> 内提供 CSS：</p><div class="language-kotlin vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/styles.css&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    call.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">respondCss</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        body</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            backgroundColor </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Color.darkBlue</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            margin </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Margin</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.px)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        rule</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;h1.page-title&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            color </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Color.white</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>最后，你可以将指定的 CSS 用于使用 <a href="./server-html-dsl">HTML DSL</a> 创建的 HTML 文档：</p><div class="language-kotlin vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/html-dsl&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    call.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">respondHtml</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        head</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">            link</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(rel </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;stylesheet&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, href </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;/styles.css&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, type </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;text/css&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        body</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">            h1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(classes </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;page-title&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                +</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Hello from Ktor!&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>完整的示例可以在此处找到：<a href="https://github.com/ktorio/ktor-documentation/tree/3.2.3/codeSnippets/snippets/css-dsl" target="_blank" rel="noreferrer">css-dsl</a>。</p>`,8))])}const b=o(g,[["render",c]]);export{m as __pageData,b as default};
