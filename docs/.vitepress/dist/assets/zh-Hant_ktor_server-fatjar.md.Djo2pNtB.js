import{_ as p,C as t,c as o,o as d,j as s,G as e,ag as h,a as i,w as l}from"./chunks/framework.Bksy39di.js";const y=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"zh-Hant/ktor/server-fatjar.md","filePath":"zh-Hant/ktor/server-fatjar.md","lastUpdated":1755457140000}'),k={name:"zh-Hant/ktor/server-fatjar.md"};function c(u,a,g,E,b,m){const n=t("tldr"),r=t("link-summary");return d(),o("div",null,[a[2]||(a[2]=s("h1",{id:"透過-ktor-gradle-插件建立-fat-jar",tabindex:"-1"},[i("透過 Ktor Gradle 插件建立 Fat JAR "),s("a",{class:"header-anchor",href:"#透過-ktor-gradle-插件建立-fat-jar","aria-label":'Permalink to "透過 Ktor Gradle 插件建立 Fat JAR"'},"​")],-1)),e(n,null,{default:l(()=>a[0]||(a[0]=[s("p",null,[s("b",null,"程式碼範例"),i(": "),s("a",{href:"https://github.com/ktorio/ktor-documentation/tree/3.2.3/codeSnippets/snippets/deployment-ktor-plugin"}," deployment-ktor-plugin ")],-1)])),_:1}),e(r,null,{default:l(()=>a[1]||(a[1]=[i("學習如何使用 Ktor Gradle 插件建立及執行可執行 Fat JAR。")])),_:1}),a[3]||(a[3]=h(`<p><a href="https://github.com/ktorio/ktor-build-plugins" target="_blank" rel="noreferrer">Ktor Gradle 插件</a> 允許您建立並執行一個包含所有程式碼依賴項的可執行 JAR (Fat JAR)。</p><h2 id="configure-plugin" tabindex="-1">配置 Ktor 插件 <a class="header-anchor" href="#configure-plugin" aria-label="Permalink to &quot;配置 Ktor 插件 {id=&quot;configure-plugin&quot;}&quot;">​</a></h2><p>要建立 Fat JAR，您需要先配置 Ktor 插件：</p><ol><li><p>打開 <code>build.gradle.kts</code> 檔案並將插件加入 <code>plugins</code> 區塊：</p><div class="language-kotlin vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">plugins</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;io.ktor.plugin&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) version </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;3.2.3&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div></li><li><p>確保已配置 <a href="./server-dependencies#create-entry-point">主要應用程式類別</a>：</p><div class="language-kotlin vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">application</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    mainClass.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">set</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;com.example.ApplicationKt&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div></li><li><p>(可選) 您可以使用 <code>ktor.fatJar</code> 擴充功能配置要生成的 Fat JAR 的名稱：</p><div class="language-kotlin vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ktor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    fatJar</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        archiveFileName.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">set</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;fat.jar&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div></li></ol><div class="danger custom-block"><p class="custom-block-title">WARNING</p><p>如果您將 Ktor Gradle 插件與 Kotlin Multiplatform Gradle 插件一同應用，Fat JAR 建立功能會自動停用。 要能夠一同使用它們： 1. 建立一個僅限 JVM 的專案，並如上所示應用 Ktor Gradle 插件。 2. 將 Kotlin Multiplatform 專案作為依賴項加入該僅限 JVM 的專案。 如果此變通方法未能為您解決問題，請在 <a href="https://youtrack.jetbrains.com/issue/KTOR-8464" target="_blank" rel="noreferrer">KTOR-8464</a> 中留言告知我們。</p></div><h2 id="build" tabindex="-1">建立並執行 Fat JAR <a class="header-anchor" href="#build" aria-label="Permalink to &quot;建立並執行 Fat JAR {id=&quot;build&quot;}&quot;">​</a></h2><p>Ktor 插件提供了以下任務用於建立和執行 Fat JAR：</p><ul><li><code>buildFatJar</code>：建立專案和執行時依賴項的組合 JAR。當此建立完成時，您應該會在 <code>build/libs</code> 目錄中看到 <code>***-all.jar</code> 檔案。</li><li><code>runFatJar</code>：建立專案的 Fat JAR 並執行它。</li></ul><blockquote><p>要學習如何使用 ProGuard 最小化生成的 JAR，請參考 <a href="https://github.com/ktorio/ktor-documentation/tree/3.2.3/codeSnippets/snippets/proguard" target="_blank" rel="noreferrer">proguard</a> 範例。</p></blockquote>`,9))])}const f=p(k,[["render",c]]);export{y as __pageData,f as default};
