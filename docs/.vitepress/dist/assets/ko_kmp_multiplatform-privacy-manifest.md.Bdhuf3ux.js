import{_ as i}from"./chunks/app-store-required-reasons-warning.Jd9b2vB2.js";import{_ as s,c as e,o as t,ag as n}from"./chunks/framework.Bksy39di.js";const m=JSON.parse('{"title":"iOS 앱용 개인 정보 보호 매니페스트","description":"","frontmatter":{},"headers":[],"relativePath":"ko/kmp/multiplatform-privacy-manifest.md","filePath":"ko/kmp/multiplatform-privacy-manifest.md","lastUpdated":1755516278000}'),l={name:"ko/kmp/multiplatform-privacy-manifest.md"};function p(r,a,o,h,c,d){return t(),e("div",null,a[0]||(a[0]=[n('<h1 id="ios-앱용-개인-정보-보호-매니페스트" tabindex="-1">iOS 앱용 개인 정보 보호 매니페스트 <a class="header-anchor" href="#ios-앱용-개인-정보-보호-매니페스트" aria-label="Permalink to &quot;iOS 앱용 개인 정보 보호 매니페스트&quot;">​</a></h1><p>앱이 Apple App Store용이며 <a href="https://developer.apple.com/documentation/bundleresources/describing-use-of-required-reason-api" target="_blank" rel="noreferrer">필수 사유 API</a>를 사용하는 경우, App Store Connect에서 앱에 올바른 개인 정보 보호 매니페스트가 없다는 경고를 발행할 수 있습니다:</p><p><img src="'+i+`" alt="Required reasons warning" width="700"></p><p>이는 네이티브 또는 멀티플랫폼을 포함한 모든 Apple 생태계 앱에 영향을 미칠 수 있습니다. 앱이 제3자 라이브러리 또는 SDK를 통해 필수 사유 API를 사용할 수도 있으며, 이는 명확하지 않을 수 있습니다. Kotlin Multiplatform은 사용자가 인지하지 못하는 API를 사용하는 프레임워크 중 하나일 수 있습니다.</p><p>이 페이지에서는 문제에 대한 자세한 설명과 해결을 위한 권장 사항을 제공합니다.</p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>이 페이지는 Kotlin 팀의 현재 문제 이해를 반영합니다. 허용된 접근 방식과 해결 방법에 대한 더 많은 데이터와 지식을 얻게 되면, 페이지를 업데이트하여 반영할 예정입니다.</p></div><h2 id="문제는-무엇인가요" tabindex="-1">문제는 무엇인가요 <a class="header-anchor" href="#문제는-무엇인가요" aria-label="Permalink to &quot;문제는 무엇인가요&quot;">​</a></h2><p>App Store 제출에 대한 Apple의 요구 사항은 <a href="https://developer.apple.com/news/?id=r1henawx" target="_blank" rel="noreferrer">2024년 봄에 변경되었습니다</a>. <a href="https://appstoreconnect.apple.com" target="_blank" rel="noreferrer">App Store Connect</a>는 더 이상 개인 정보 보호 매니페스트에 필수 사유 API 사용에 대한 이유를 지정하지 않는 앱을 허용하지 않습니다.</p><p>이는 수동 검토가 아닌 자동 검사입니다: 앱 코드가 분석되고, 이메일로 문제 목록을 받게 됩니다. 해당 이메일에는 &quot;ITMS-91053: Missing API declaration&quot; 문제가 언급되며, <a href="https://developer.apple.com/documentation/bundleresources/describing-use-of-required-reason-api" target="_blank" rel="noreferrer">필수 사유</a> 범주에 속하는 앱에서 사용된 모든 API 카테고리가 나열됩니다.</p><p>이상적으로는 앱이 사용하는 모든 SDK가 자체 개인 정보 보호 매니페스트를 제공하여 이에 대해 걱정할 필요가 없습니다. 그러나 일부 종속성(dependencies)이 이를 수행하지 않으면 App Store 제출이 플래그될 수 있습니다.</p><h2 id="해결-방법" tabindex="-1">해결 방법 <a class="header-anchor" href="#해결-방법" aria-label="Permalink to &quot;해결 방법&quot;">​</a></h2><p>앱 제출을 시도하고 App Store로부터 상세 문제 목록을 받은 후, Apple 문서를 따라 매니페스트를 빌드할 수 있습니다:</p><ul><li><a href="https://developer.apple.com/documentation/bundleresources/privacy-manifest-files" target="_blank" rel="noreferrer">개인 정보 보호 매니페스트 파일 개요</a></li><li><a href="https://developer.apple.com/documentation/bundleresources/describing-data-use-in-privacy-manifests" target="_blank" rel="noreferrer">개인 정보 보호 매니페스트의 데이터 사용 설명</a></li><li><a href="https://developer.apple.com/documentation/bundleresources/describing-use-of-required-reason-api" target="_blank" rel="noreferrer">필수 사유 API 사용 설명</a></li></ul><p>결과 파일은 딕셔너리 모음입니다. 접근하는 각 API 유형에 대해, 제공된 목록에서 하나 이상의 사용 사유를 선택하세요. Xcode는 시각적 레이아웃과 각 필드에 대한 유효한 값이 포함된 드롭다운 목록을 제공하여 <code>.xcprivacy</code> 파일 편집을 돕습니다.</p><p>Kotlin 프레임워크의 종속성에서 필수 사유 API 사용을 찾는 데 사용할 수 있는 <a href="#find-usages-of-required-reason-apis">특수 도구</a>와 <code>.xcprivacy</code> 파일을 Kotlin 아티팩트에 번들로 묶는 <a href="#place-the-xcprivacy-file-in-your-kotlin-artifacts">별도의 플러그인</a>을 사용할 수 있습니다.</p><p>새 개인 정보 보호 매니페스트가 App Store 요구 사항을 충족하는 데 도움이 되지 않거나 단계를 수행하는 방법을 알아낼 수 없는 경우, <a href="https://youtrack.jetbrains.com/issue/KT-67603" target="_blank" rel="noreferrer">이 YouTrack 이슈</a>에 문의하여 사례를 공유해 주세요.</p><h2 id="필수-사유-api-사용-찾기" tabindex="-1">필수 사유 API 사용 찾기 <a class="header-anchor" href="#필수-사유-api-사용-찾기" aria-label="Permalink to &quot;필수 사유 API 사용 찾기&quot;">​</a></h2><p>앱의 Kotlin 코드 또는 종속성 중 하나가 <code>platform.posix</code>와 같은 라이브러리에서 필수 사유 API에 접근할 수 있습니다. 예를 들어, <code>fstat</code>:</p><div class="language-kotlin vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> platform.posix.fstat</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">fun</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> useRequiredReasonAPI</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    fstat</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">..</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>어떤 종속성이 필수 사유 API를 사용하는지 파악하기 어려운 경우가 있습니다. 이를 돕기 위해 간단한 도구를 만들었습니다.</p><p>사용하려면 프로젝트에서 Kotlin 프레임워크가 선언된 디렉토리에서 다음 명령을 실행하세요:</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">/usr/bin/python3</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -c</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;$(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">curl</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -fsSL</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://github.com/JetBrains/kotlin/raw/rrf_v0.0.1/libraries/tools/required-reason-finder/required_reason_finder.py)&quot;</span></span></code></pre></div><p>또한 이 스크립트를 <a href="https://github.com/JetBrains/kotlin/blob/rrf_v0.0.1/libraries/tools/required-reason-finder/required_reason_finder.py" target="_blank" rel="noreferrer">별도로 다운로드</a>하여 검사하고 <code>python3</code>를 사용하여 실행할 수 있습니다.</p><h2 id="xcprivacy-파일을-kotlin-아티팩트에-배치하기" tabindex="-1">.xcprivacy 파일을 Kotlin 아티팩트에 배치하기 <a class="header-anchor" href="#xcprivacy-파일을-kotlin-아티팩트에-배치하기" aria-label="Permalink to &quot;.xcprivacy 파일을 Kotlin 아티팩트에 배치하기&quot;">​</a></h2><p><code>PrivacyInfo.xcprivacy</code> 파일을 Kotlin 아티팩트에 번들로 묶어야 하는 경우, <code>apple-privacy-manifests</code> 플러그인을 사용하세요:</p><div class="language-kotlin vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">plugins</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    kotlin</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;multiplatform&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    kotlin</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;apple-privacy-manifests&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) version </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;1.0.0&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">kotlin</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    privacyManifest</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        embed</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            privacyManifest </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> layout.projectDirectory.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">file</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;PrivacyInfo.xcprivacy&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).asFile,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        )</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>플러그인은 개인 정보 보호 매니페스트 파일을 <a href="https://developer.apple.com/documentation/bundleresources/adding-a-privacy-manifest-to-your-app-or-third-party-sdk?language=objc" target="_blank" rel="noreferrer">해당 출력 위치</a>로 복사합니다.</p><h2 id="알려진-사용-사례" tabindex="-1">알려진 사용 사례 <a class="header-anchor" href="#알려진-사용-사례" aria-label="Permalink to &quot;알려진 사용 사례&quot;">​</a></h2><h3 id="compose-multiplatform" tabindex="-1">Compose Multiplatform <a class="header-anchor" href="#compose-multiplatform" aria-label="Permalink to &quot;Compose Multiplatform&quot;">​</a></h3><p>Compose Multiplatform을 사용하면 바이너리에서 <code>fstat</code>, <code>stat</code>, <code>mach_absolute_time</code> 사용이 발생할 수 있습니다. 이러한 함수가 추적이나 핑거프린팅에 사용되지 않으며 기기에서 전송되지 않더라도, Apple은 여전히 이들을 필수 사유가 누락된 API로 플래그할 수 있습니다.</p><p><code>stat</code> 및 <code>fstat</code> 사용에 대한 사유를 반드시 지정해야 하는 경우, <code>0A2A.1</code>을 사용하세요. <code>mach_absolute_time</code>의 경우, <code>35F9.1</code>을 사용하세요.</p><p>Compose Multiplatform에서 사용되는 필수 사유 API에 대한 추가 업데이트는 <a href="https://github.com/JetBrains/compose-multiplatform/issues/4738" target="_blank" rel="noreferrer">이 이슈</a>를 참조하세요.</p><h3 id="kotlin-native-런타임-1-9-10-이하-버전" tabindex="-1">Kotlin/Native 런타임 1.9.10 이하 버전 <a class="header-anchor" href="#kotlin-native-런타임-1-9-10-이하-버전" aria-label="Permalink to &quot;Kotlin/Native 런타임 1.9.10 이하 버전&quot;">​</a></h3><p><code>mach_absolute_time</code> API는 Kotlin/Native 런타임의 <code>mimalloc</code> 할당자에서 사용됩니다. 이는 Kotlin 1.9.10 및 이전 버전의 기본 할당자였습니다.</p><p>Kotlin 1.9.20 또는 이후 버전으로 업그레이드하는 것을 권장합니다. 업그레이드가 불가능한 경우, 메모리 할당자를 변경하세요. 이를 위해 Gradle 빌드 스크립트에서 현재 Kotlin 할당자의 경우 <code>-Xallocator=custom</code> 컴파일 옵션을 설정하거나 시스템 할당자의 경우 <code>-Xallocator=std</code>를 설정하세요.</p><p>자세한 내용은 <a href="https://kotlinlang.org/docs/native-memory-manager.html" target="_blank" rel="noreferrer">Kotlin/Native 메모리 관리</a>를 참조하세요.</p>`,36)]))}const g=s(l,[["render",p]]);export{m as __pageData,g as default};
