import{_ as i,c as a,o as n,ag as p}from"./chunks/framework.Bksy39di.js";const g=JSON.parse('{"title":"KSPをコマンドラインから実行する","description":"","frontmatter":{},"headers":[],"relativePath":"ja/kotlin/ksp-command-line.md","filePath":"ja/kotlin/ksp-command-line.md","lastUpdated":1754307826000}'),l={name:"ja/kotlin/ksp-command-line.md"};function t(h,s,k,e,d,r){return n(),a("div",null,s[0]||(s[0]=[p(`<h1 id="kspをコマンドラインから実行する" tabindex="-1">KSPをコマンドラインから実行する <a class="header-anchor" href="#kspをコマンドラインから実行する" aria-label="Permalink to &quot;KSPをコマンドラインから実行する&quot;">​</a></h1><p>KSPはKotlinコンパイラのプラグインであり、Kotlinコンパイラと一緒に実行する必要があります。これらをダウンロードして展開してください。</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#!/bin/bash</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Kotlin compiler</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">wget</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://github.com/JetBrains/kotlin/releases/download/v2.2.0/kotlin-compiler-2.2.0.zip</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">unzip</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> kotlin-compiler-2.2.0.zip</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># KSP</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">wget</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://github.com/google/ksp/releases/download/2.2.0-2.0.2/artifacts.zip</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">unzip</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> artifacts.zip</span></span></code></pre></div><p><code>kotlinc</code>でKSPを実行するには、<code>-Xplugin</code>オプションを<code>kotlinc</code>に渡します。</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>-Xplugin=/path/to/symbol-processing-cmdline-2.2.0-2.0.2.jar</span></span></code></pre></div><p>これは<code>symbol-processing-2.2.0-2.0.2.jar</code>とは異なります。後者はGradleで実行する際に<code>kotlin-compiler-embeddable</code>と共に使用するように設計されています。コマンドラインの<code>kotlinc</code>には<code>symbol-processing-cmdline-2.2.0-2.0.2.jar</code>が必要です。</p><p>API JARも必要です。</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>-Xplugin=/path/to/symbol-processing-api-2.2.0-2.0.2.jar</span></span></code></pre></div><p>完全な例を参照してください。</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#!/bin/bash</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">KSP_PLUGIN_ID</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">com.google.devtools.ksp.symbol-processing</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">KSP_PLUGIN_OPT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">plugin:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$KSP_PLUGIN_ID</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">KSP_PLUGIN_JAR</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">./com/google/devtools/ksp/symbol-processing-cmdline/2.2.0-2.0.2/symbol-processing-cmdline-2.2.0-2.0.2.jar</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">KSP_API_JAR</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">./com/google/devtools/ksp/symbol-processing-api/2.2.0-2.0.2/symbol-processing-api-2.2.0-2.0.2.jar</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">KOTLINC</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">./kotlinc/bin/kotlinc</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">AP</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/path/to/your-processor.jar</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mkdir</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> out</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$KOTLINC </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        -Xplugin</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$KSP_PLUGIN_JAR </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">\\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        -Xplugin=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$KSP_API_JAR</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        -Xallow-no-source-files</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        -P</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $KSP_PLUGIN_OPT</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">:apclasspath=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$AP </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        -P</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $KSP_PLUGIN_OPT</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">:projectBaseDir=.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        -P</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $KSP_PLUGIN_OPT</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">:classOutputDir=./out</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        -P</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $KSP_PLUGIN_OPT</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">:javaOutputDir=./out</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        -P</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $KSP_PLUGIN_OPT</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">:kotlinOutputDir=./out</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        -P</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $KSP_PLUGIN_OPT</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">:resourceOutputDir=./out</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        -P</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $KSP_PLUGIN_OPT</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">:kspOutputDir=./out</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        -P</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $KSP_PLUGIN_OPT</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">:cachesDir=./out</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        -P</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $KSP_PLUGIN_OPT</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">:incremental=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        -P</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $KSP_PLUGIN_OPT</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">:apoption=key1=value1</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        -P</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $KSP_PLUGIN_OPT</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">:apoption=key2=value2</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        $*</span></span></code></pre></div>`,10)]))}const F=i(l,[["render",t]]);export{g as __pageData,F as default};
